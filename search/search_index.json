{"config":{"lang":["en"],"separator":"[\\s\\-,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"aynse","text":"<p>A lean, modern Python library for fetching data from the National Stock Exchange (NSE) of India.</p> <ul> <li> <p> Historical Data</p> <p>Download OHLCV data for stocks, indices, and derivatives with automatic retry and caching.</p> <p> Historical Data</p> </li> <li> <p> Live Quotes</p> <p>Real-time stock quotes, option chains, market status, and more.</p> <p> Live Data</p> </li> <li> <p> Bhavcopy</p> <p>Download daily bhavcopies for equity, F&amp;O, and indices.</p> <p> Historical Data</p> </li> <li> <p> CLI</p> <p>Command-line interface for quick downloads without writing code.</p> <p> CLI Reference</p> </li> </ul>"},{"location":"#features","title":"Features","text":"<ul> <li>Historical data: stocks, indices, derivatives (F&amp;O)</li> <li>Bhavcopy: equity, F&amp;O, index downloads</li> <li>Live market data: real-time quotes, option chains</li> <li>CLI: simple commands for quick downloads</li> <li>Resilient networking: HTTP/2, connection pooling, retries with exponential backoff</li> <li>Rate limiting: token bucket algorithm prevents API throttling</li> <li>Circuit breaker: automatic failure detection and recovery</li> <li>Batching &amp; streaming: adaptive concurrency and low-memory processing</li> <li>Comprehensive type hints: full typing support for IDE autocomplete</li> </ul>"},{"location":"#installation","title":"Installation","text":"<pre><code>pip install aynse\n</code></pre> <p>For development:</p> <pre><code>pip install aynse[dev]\n# or\npip install -r requirements.dev.txt\n</code></pre>"},{"location":"#quick-start","title":"Quick Start","text":""},{"location":"#get-historical-stock-data","title":"Get Historical Stock Data","text":"<pre><code>from datetime import date\nfrom aynse import stock_df\n\n# Fetch RELIANCE data for January 2024\ndf = stock_df(\n    symbol=\"RELIANCE\",\n    from_date=date(2024, 1, 1),\n    to_date=date(2024, 1, 31)\n)\nprint(df.head())\n</code></pre>"},{"location":"#get-live-stock-quote","title":"Get Live Stock Quote","text":"<pre><code>from aynse import NSELive\n\nlive = NSELive()\nquote = live.stock_quote(\"INFY\")\n\nprint(f\"Price: \u20b9{quote['priceInfo']['lastPrice']}\")\nprint(f\"Change: {quote['priceInfo']['pChange']}%\")\n</code></pre>"},{"location":"#download-bhavcopy","title":"Download Bhavcopy","text":"<pre><code>from datetime import date\nfrom aynse import bhavcopy_save\n\n# Download equity bhavcopy\nbhavcopy_save(date(2024, 7, 26), \"downloads/\")\n</code></pre>"},{"location":"#cli-usage","title":"CLI Usage","text":"<pre><code># Download historical stock data\naynse stock -s RELIANCE -f 2024-01-01 -t 2024-03-31 -o reliance.csv\n\n# Get live quote\naynse quote -s RELIANCE\n\n# List trading holidays\naynse holidays -y 2024\n</code></pre>"},{"location":"#architecture","title":"Architecture","text":"<pre><code>aynse/\n\u251c\u2500\u2500 nse/                    # NSE data fetching\n\u2502   \u251c\u2500\u2500 history.py         # Historical data (stocks, indices, derivatives)\n\u2502   \u251c\u2500\u2500 archives.py        # Bhavcopy downloads\n\u2502   \u251c\u2500\u2500 live.py            # Live market data\n\u2502   \u251c\u2500\u2500 http_client.py     # Resilient HTTP client\n\u2502   \u251c\u2500\u2500 connection_pool.py # Connection management\n\u2502   \u251c\u2500\u2500 request_batcher.py # Batch processing\n\u2502   \u2514\u2500\u2500 streaming_processor.py  # Memory-efficient streaming\n\u251c\u2500\u2500 rbi/                   # RBI data\n\u2502   \u2514\u2500\u2500 historical.py      # Policy rates\n\u251c\u2500\u2500 holidays.py            # Trading calendar\n\u251c\u2500\u2500 util.py                # Utilities (caching, date handling)\n\u2514\u2500\u2500 cli.py                 # Command-line interface\n</code></pre>"},{"location":"#next-steps","title":"Next Steps","text":"<ul> <li>Historical Data Guide - Download OHLCV data</li> <li>Live Data Guide - Real-time quotes and option chains</li> <li>CLI Reference - Command-line usage</li> <li>API Reference - Complete API documentation</li> <li>Data Calls Reference - All available data calls</li> </ul>"},{"location":"api/","title":"API Reference","text":"<p>This page contains the auto-generated API reference for <code>aynse</code>.</p>"},{"location":"api/#nse-module","title":"NSE Module","text":"<p>The main module for fetching NSE data.</p>"},{"location":"api/#historical-data","title":"Historical Data","text":""},{"location":"api/#aynse.nse.history.stock_raw","title":"aynse.nse.history.stock_raw  <code>module-attribute</code>","text":"<pre><code>stock_raw = stock_raw\n</code></pre>"},{"location":"api/#aynse.nse.history.stock_df","title":"aynse.nse.history.stock_df","text":"<pre><code>stock_df(symbol, from_date, to_date, series='EQ')\n</code></pre>"},{"location":"api/#aynse.nse.history.stock_csv","title":"aynse.nse.history.stock_csv","text":"<pre><code>stock_csv(symbol, from_date, to_date, series='EQ', output='', show_progress=True)\n</code></pre>"},{"location":"api/#aynse.nse.history.derivatives_raw","title":"aynse.nse.history.derivatives_raw  <code>module-attribute</code>","text":"<pre><code>derivatives_raw = derivatives_raw\n</code></pre>"},{"location":"api/#aynse.nse.history.derivatives_df","title":"aynse.nse.history.derivatives_df","text":"<pre><code>derivatives_df(symbol, from_date, to_date, expiry_date, instrument_type, strike_price=None, option_type=None)\n</code></pre>"},{"location":"api/#aynse.nse.history.index_raw","title":"aynse.nse.history.index_raw  <code>module-attribute</code>","text":"<pre><code>index_raw = index_raw\n</code></pre>"},{"location":"api/#aynse.nse.history.index_df","title":"aynse.nse.history.index_df","text":"<pre><code>index_df(symbol, from_date, to_date)\n</code></pre>"},{"location":"api/#archives","title":"Archives","text":""},{"location":"api/#aynse.nse.archives.bhavcopy_raw","title":"aynse.nse.archives.bhavcopy_raw  <code>module-attribute</code>","text":"<pre><code>bhavcopy_raw = bhavcopy_raw\n</code></pre>"},{"location":"api/#aynse.nse.archives.bhavcopy_save","title":"aynse.nse.archives.bhavcopy_save  <code>module-attribute</code>","text":"<pre><code>bhavcopy_save = bhavcopy_save\n</code></pre>"},{"location":"api/#aynse.nse.archives.bhavcopy_fo_raw","title":"aynse.nse.archives.bhavcopy_fo_raw  <code>module-attribute</code>","text":"<pre><code>bhavcopy_fo_raw = bhavcopy_fo_raw\n</code></pre>"},{"location":"api/#aynse.nse.archives.expiry_dates","title":"aynse.nse.archives.expiry_dates","text":"<pre><code>expiry_dates(dt: date, instrument_type: str = '', symbol: str = '', contracts: int = 0, months_ahead: int = 6) -&gt; list\n</code></pre> <p>Algorithmically calculate expiry dates based on NSE rules.</p> PARAMETER DESCRIPTION <code>dt</code> <p>Reference date for calculation</p> <p> TYPE: <code>date</code> </p> <code>instrument_type</code> <p>Type of derivative instrument (e.g., \"FUTIDX\", \"OPTIDX\", \"FUTSTK\", \"OPTSTK\")</p> <p> TYPE: <code>str</code> DEFAULT: <code>''</code> </p> <code>symbol</code> <p>Symbol name (used to determine contract cycle)</p> <p> TYPE: <code>str</code> DEFAULT: <code>''</code> </p> <code>contracts</code> <p>Minimum open interest filter (deprecated in algorithmic approach)</p> <p> TYPE: <code>int</code> DEFAULT: <code>0</code> </p> <code>months_ahead</code> <p>Number of months ahead to calculate expiries for</p> <p> TYPE: <code>int</code> DEFAULT: <code>6</code> </p> RETURNS DESCRIPTION <code>list</code> <p>List of expiry dates</p>"},{"location":"api/#live-data","title":"Live Data","text":""},{"location":"api/#aynse.nse.live.NSELive","title":"aynse.nse.live.NSELive","text":"<pre><code>NSELive()\n</code></pre> <p>Initialize NSELive with centralized HTTP client</p>"},{"location":"api/#aynse.nse.live.NSELive.stock_quote","title":"stock_quote","text":"<pre><code>stock_quote(symbol)\n</code></pre>"},{"location":"api/#aynse.nse.live.NSELive.stock_quote_fno","title":"stock_quote_fno","text":"<pre><code>stock_quote_fno(symbol)\n</code></pre>"},{"location":"api/#aynse.nse.live.NSELive.trade_info","title":"trade_info","text":"<pre><code>trade_info(symbol)\n</code></pre>"},{"location":"api/#aynse.nse.live.NSELive.market_status","title":"market_status","text":"<pre><code>market_status()\n</code></pre>"},{"location":"api/#aynse.nse.live.NSELive.chart_data","title":"chart_data","text":"<pre><code>chart_data(symbol, indices=False, flag='1D')\n</code></pre> <p>Fetch intraday/period graph data.</p> <p>NSE moved live chart data to NextApi: - Equities: /api/NextApi/apiClient/GetQuoteApi?functionName=getSymbolChartData             symbol must be EQN (library adds suffix automatically)             uses <code>days</code> parameter (e.g., 1D, 5D, 3M) - Indices:  /api/NextApi/apiClient?functionName=getGraphChart             uses <code>type</code> and <code>flag</code> (e.g., 1D, 5D, 6M) <p>We normalize responses so callers still receive a dict with grapthData.</p>"},{"location":"api/#aynse.nse.live.NSELive.tick_data","title":"tick_data","text":"<pre><code>tick_data(symbol, indices=False, flag='1D')\n</code></pre>"},{"location":"api/#aynse.nse.live.NSELive.all_indices","title":"all_indices","text":"<pre><code>all_indices()\n</code></pre>"},{"location":"api/#aynse.nse.live.NSELive.live_index","title":"live_index","text":"<pre><code>live_index(symbol='NIFTY 50')\n</code></pre>"},{"location":"api/#aynse.nse.live.NSELive.index_option_chain","title":"index_option_chain","text":"<pre><code>index_option_chain(symbol='NIFTY')\n</code></pre>"},{"location":"api/#aynse.nse.live.NSELive.equities_option_chain","title":"equities_option_chain","text":"<pre><code>equities_option_chain(symbol)\n</code></pre>"},{"location":"api/#aynse.nse.live.NSELive.currency_option_chain","title":"currency_option_chain","text":"<pre><code>currency_option_chain(symbol='USDINR')\n</code></pre>"},{"location":"api/#aynse.nse.live.NSELive.pre_open_market","title":"pre_open_market","text":"<pre><code>pre_open_market(key='NIFTY')\n</code></pre>"},{"location":"api/#aynse.nse.live.NSELive.holiday_list","title":"holiday_list","text":"<pre><code>holiday_list()\n</code></pre>"},{"location":"api/#aynse.nse.live.NSELive.corporate_announcements","title":"corporate_announcements","text":"<pre><code>corporate_announcements(segment='equities', from_date=None, to_date=None, symbol=None)\n</code></pre> <p>This function returns the corporate annoucements  (https://www.nseindia.com/companies-listing/corporate-filings-announcements)</p>"},{"location":"api/#holidays-module","title":"Holidays Module","text":""},{"location":"api/#aynse.holidays","title":"aynse.holidays","text":"<p>Trading holidays for NSE (National Stock Exchange of India).</p> <p>This module provides a comprehensive list of trading holidays and utilities for checking if a given date is a trading day.</p> <p>The holiday list is based on the Zipline calendar library and is updated with official NSE holiday announcements.</p> Reference <p>https://github.com/quantopian/trading_calendars/blob/master/trading_calendars/exchange_calendar_xbom.py</p>"},{"location":"api/#aynse.holidays.holidays","title":"holidays","text":"<pre><code>holidays(year: Optional[int] = None, month: Optional[int] = None) -&gt; List[date]\n</code></pre> <p>Get list of NSE trading holidays.</p> PARAMETER DESCRIPTION <code>year</code> <p>Filter by year (optional). If None, returns all holidays.</p> <p> TYPE: <code>Optional[int]</code> DEFAULT: <code>None</code> </p> <code>month</code> <p>Filter by month (optional, requires year to be set).</p> <p> TYPE: <code>Optional[int]</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>List[date]</code> <p>List of holiday dates, sorted in chronological order.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; # Get all holidays\n&gt;&gt;&gt; all_holidays = holidays()\n</code></pre> <pre><code>&gt;&gt;&gt; # Get holidays for 2024\n&gt;&gt;&gt; holidays_2024 = holidays(year=2024)\n</code></pre> <pre><code>&gt;&gt;&gt; # Get holidays for January 2024\n&gt;&gt;&gt; jan_2024 = holidays(year=2024, month=1)\n</code></pre>"},{"location":"api/#aynse.holidays.is_holiday","title":"is_holiday","text":"<pre><code>is_holiday(dt: date) -&gt; bool\n</code></pre> <p>Check if a date is an NSE trading holiday.</p> PARAMETER DESCRIPTION <code>dt</code> <p>Date to check</p> <p> TYPE: <code>date</code> </p> RETURNS DESCRIPTION <code>bool</code> <p>True if the date is a holiday, False otherwise</p> Example <p>from datetime import date is_holiday(date(2024, 1, 26))  # Republic Day True</p>"},{"location":"api/#aynse.holidays.is_trading_day","title":"is_trading_day","text":"<pre><code>is_trading_day(dt: date) -&gt; bool\n</code></pre> <p>Check if a date is a trading day.</p> <p>A trading day is a weekday (Monday-Friday) that is not a holiday.</p> PARAMETER DESCRIPTION <code>dt</code> <p>Date to check</p> <p> TYPE: <code>date</code> </p> RETURNS DESCRIPTION <code>bool</code> <p>True if the date is a trading day, False otherwise</p> Example <p>from datetime import date is_trading_day(date(2024, 1, 15))  # Monday, not a holiday True is_trading_day(date(2024, 1, 13))  # Saturday False</p>"},{"location":"api/#aynse.holidays.get_trading_days","title":"get_trading_days","text":"<pre><code>get_trading_days(from_date: date, to_date: date) -&gt; List[date]\n</code></pre> <p>Get all trading days in a date range.</p> PARAMETER DESCRIPTION <code>from_date</code> <p>Start date (inclusive)</p> <p> TYPE: <code>date</code> </p> <code>to_date</code> <p>End date (inclusive)</p> <p> TYPE: <code>date</code> </p> RETURNS DESCRIPTION <code>List[date]</code> <p>List of trading days in the range, sorted chronologically</p> Example <p>from datetime import date trading_days = get_trading_days(date(2024, 1, 1), date(2024, 1, 31))</p>"},{"location":"api/#aynse.holidays.count_trading_days","title":"count_trading_days","text":"<pre><code>count_trading_days(from_date: date, to_date: date) -&gt; int\n</code></pre> <p>Count the number of trading days in a date range.</p> PARAMETER DESCRIPTION <code>from_date</code> <p>Start date (inclusive)</p> <p> TYPE: <code>date</code> </p> <code>to_date</code> <p>End date (inclusive)</p> <p> TYPE: <code>date</code> </p> RETURNS DESCRIPTION <code>int</code> <p>Number of trading days in the range</p>"},{"location":"api/#rbi-module","title":"RBI Module","text":""},{"location":"api/#aynse.rbi.RBI","title":"aynse.rbi.RBI","text":"<pre><code>RBI()\n</code></pre> <p>Client for fetching RBI (Reserve Bank of India) data.</p> <p>Provides access to policy rate archives and other monetary policy information from the RBI website.</p> Example <p>rbi = RBI() rates = rbi.policy_rate_archive(n=10) print(rates[0])</p> <p>Initialize RBI client with a requests session.</p>"},{"location":"api/#aynse.rbi.RBI.current_rates","title":"current_rates","text":"<pre><code>current_rates() -&gt; None\n</code></pre> <p>Get current RBI policy rates.</p> <p>.. deprecated::     This function is broken due to website changes.     Use <code>policy_rate_archive()</code> instead.</p> RAISES DESCRIPTION <code>DeprecationWarning</code> <p>Always raised as this method is deprecated</p>"},{"location":"api/#aynse.rbi.RBI.policy_rate_archive","title":"policy_rate_archive","text":"<pre><code>policy_rate_archive(n: int = 10) -&gt; List[Dict[str, Any]]\n</code></pre> <p>Fetch historical policy rates from RBI website.</p> PARAMETER DESCRIPTION <code>n</code> <p>Number of past rate records to fetch (default: 10)</p> <p> TYPE: <code>int</code> DEFAULT: <code>10</code> </p> RETURNS DESCRIPTION <code>List[Dict[str, Any]]</code> <p>List of dictionaries containing policy rate data.</p> <code>List[Dict[str, Any]]</code> <p>Keys are normalized to lowercase with underscores.</p> Example <p>rbi = RBI() rates = rbi.policy_rate_archive(n=5) for rate in rates: ...     print(rate.get('date'), rate.get('repo_rate'))</p>"},{"location":"api/#aynse.rbi.policy_rate_archive","title":"aynse.rbi.policy_rate_archive","text":"<pre><code>policy_rate_archive(n: int = 10) -&gt; List[Dict[str, Any]]\n</code></pre> <p>Fetch historical policy rates from RBI website.</p> <p>Scrapes the RBI policy rate archive page to extract historical policy rate data including repo rate, reverse repo rate, etc.</p> PARAMETER DESCRIPTION <code>n</code> <p>Number of past rate records to fetch (default: 10). Higher values will fetch more historical data.</p> <p> TYPE: <code>int</code> DEFAULT: <code>10</code> </p> RETURNS DESCRIPTION <code>List[Dict[str, Any]]</code> <p>List of dictionaries containing policy rate data.</p> <code>List[Dict[str, Any]]</code> <p>Each dictionary represents one rate announcement.</p> <code>List[Dict[str, Any]]</code> <p>Column names are normalized to lowercase with underscores.</p> RAISES DESCRIPTION <code>RequestException</code> <p>If the HTTP request fails</p> <code>ValueError</code> <p>If no data table is found on the page</p> Example <p>rates = policy_rate_archive(n=5) for rate in rates: ...     print(f\"Date: {rate.get('date')}, Repo: {rate.get('repo_rate')}\")</p>"},{"location":"api/#http-client","title":"HTTP Client","text":"<p>The library includes resilient HTTP clients with retry logic, rate limiting, and circuit breakers.</p>"},{"location":"api/#nsehttpclient","title":"NSEHttpClient","text":"<pre><code>from aynse.nse.http_client import NSEHttpClient\n\nclient = NSEHttpClient(\n    base_url=\"https://www.nseindia.com\",\n    timeout=15.0,\n    max_connections=20,\n    rate_limit_per_sec=10\n)\n\n# Make requests\nresponse = client.get(\"/api/marketStatus\")\ndata = client.get_json(\"/api/marketStatus\")\n</code></pre>"},{"location":"api/#connection-pool","title":"Connection Pool","text":"<pre><code>from aynse.nse.connection_pool import get_connection_pool\n\npool = get_connection_pool()\nclient = pool.get_client(\"https://www.nseindia.com\")\n\n# The pool manages client lifecycle and reuse\ndata = client.get_json(\"/api/marketStatus\")\n\n# Get pool statistics\nstats = pool.get_pool_stats()\nprint(f\"Active clients: {stats['sync_clients']}\")\n</code></pre>"},{"location":"api/#request-batching","title":"Request Batching","text":""},{"location":"api/#aynse.nse.request_batcher.RequestBatcher","title":"aynse.nse.request_batcher.RequestBatcher","text":"<pre><code>RequestBatcher(max_batch_size: int = 10, max_concurrent_batches: int = 3, timeout: float = 30.0, strategy: BatchStrategy = ADAPTIVE)\n</code></pre> <p>Efficient request batching system for NSE API calls.</p> <p>Supports both synchronous and asynchronous batching with different strategies.</p> <p>Initialize the request batcher.</p> PARAMETER DESCRIPTION <code>max_batch_size</code> <p>Maximum requests per batch</p> <p> TYPE: <code>int</code> DEFAULT: <code>10</code> </p> <code>max_concurrent_batches</code> <p>Maximum concurrent batch processors</p> <p> TYPE: <code>int</code> DEFAULT: <code>3</code> </p> <code>timeout</code> <p>Request timeout in seconds</p> <p> TYPE: <code>float</code> DEFAULT: <code>30.0</code> </p> <code>strategy</code> <p>Batching strategy to use</p> <p> TYPE: <code>BatchStrategy</code> DEFAULT: <code>ADAPTIVE</code> </p>"},{"location":"api/#aynse.nse.request_batcher.RequestBatcher.abatch_requests","title":"abatch_requests  <code>async</code>","text":"<pre><code>abatch_requests(requests: List[Dict[str, Any]], request_coro_func: Callable[..., Future[Any]], max_concurrency: Optional[int] = None, **kwargs: Any) -&gt; List[BatchResult]\n</code></pre> <p>Async batch processing with bounded concurrency.</p> PARAMETER DESCRIPTION <code>requests</code> <p>List of request parameter dicts</p> <p> TYPE: <code>List[Dict[str, Any]]</code> </p> <code>request_coro_func</code> <p>Async function to call per request</p> <p> TYPE: <code>Callable[..., Future[Any]]</code> </p> <code>max_concurrency</code> <p>Optional concurrency cap (defaults to max_concurrent_batches * max_batch_size)</p> <p> TYPE: <code>Optional[int]</code> DEFAULT: <code>None</code> </p> <code>**kwargs</code> <p>Extra kwargs for request function</p> <p> TYPE: <code>Any</code> DEFAULT: <code>{}</code> </p>"},{"location":"api/#aynse.nse.request_batcher.RequestBatcher.batch_requests","title":"batch_requests","text":"<pre><code>batch_requests(requests: List[Dict[str, Any]], request_func: Callable[..., Any], **kwargs: Any) -&gt; List[BatchResult]\n</code></pre> <p>Process multiple requests in batches.</p> PARAMETER DESCRIPTION <code>requests</code> <p>List of request parameters</p> <p> TYPE: <code>List[Dict[str, Any]]</code> </p> <code>request_func</code> <p>Function to process individual requests</p> <p> TYPE: <code>Callable[..., Any]</code> </p> <code>**kwargs</code> <p>Additional arguments for request_func</p> <p> TYPE: <code>Any</code> DEFAULT: <code>{}</code> </p> RETURNS DESCRIPTION <code>List[BatchResult]</code> <p>List of BatchResult objects</p>"},{"location":"api/#aynse.nse.request_batcher.RequestBatcher.get_stats","title":"get_stats","text":"<pre><code>get_stats() -&gt; BatchStats\n</code></pre> <p>Get current batch processing statistics</p>"},{"location":"api/#aynse.nse.request_batcher.RequestBatcher.reset_stats","title":"reset_stats","text":"<pre><code>reset_stats()\n</code></pre> <p>Reset batch processing statistics</p>"},{"location":"api/#aynse.nse.request_batcher.BatchStrategy","title":"aynse.nse.request_batcher.BatchStrategy","text":"<p>               Bases: <code>Enum</code></p> <p>Different strategies for batching requests</p>"},{"location":"api/#streaming-processor","title":"Streaming Processor","text":""},{"location":"api/#aynse.nse.streaming_processor.StreamingProcessor","title":"aynse.nse.streaming_processor.StreamingProcessor","text":"<pre><code>StreamingProcessor(config: Optional[StreamConfig] = None)\n</code></pre> <p>Efficient streaming processor for large NSE datasets.</p> <p>Processes data in chunks to minimize memory usage and handle large files that wouldn't fit in memory.</p> <p>Initialize streaming processor with configuration</p>"},{"location":"api/#aynse.nse.streaming_processor.StreamingProcessor.process_csv_file","title":"process_csv_file","text":"<pre><code>process_csv_file(file_path: str, processor_func: Callable[[List[Dict[str, Any]]], Any], skip_header: bool = True) -&gt; Any\n</code></pre> <p>Process a CSV file in streaming chunks.</p> PARAMETER DESCRIPTION <code>file_path</code> <p>Path to CSV file</p> <p> TYPE: <code>str</code> </p> <code>processor_func</code> <p>Function to process each chunk of data</p> <p> TYPE: <code>Callable[[List[Dict[str, Any]]], Any]</code> </p> <code>skip_header</code> <p>Whether to skip the first row (header)</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> RETURNS DESCRIPTION <code>Any</code> <p>Result of processing all chunks</p>"},{"location":"api/#aynse.nse.streaming_processor.StreamingProcessor.process_csv_string","title":"process_csv_string","text":"<pre><code>process_csv_string(csv_data: str, processor_func: Callable[[List[Dict[str, Any]]], Any], skip_header: bool = True) -&gt; Any\n</code></pre> <p>Process CSV data from string in streaming chunks.</p> PARAMETER DESCRIPTION <code>csv_data</code> <p>CSV data as string</p> <p> TYPE: <code>str</code> </p> <code>processor_func</code> <p>Function to process each chunk</p> <p> TYPE: <code>Callable[[List[Dict[str, Any]]], Any]</code> </p> <code>skip_header</code> <p>Whether to skip the first row</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> RETURNS DESCRIPTION <code>Any</code> <p>Result of processing all chunks</p>"},{"location":"api/#aynse.nse.streaming_processor.StreamingProcessor.process_json_file","title":"process_json_file","text":"<pre><code>process_json_file(file_path: str, processor_func: Callable[[List[Dict[str, Any]]], Any]) -&gt; Any\n</code></pre> <p>Process a JSON file in streaming chunks.</p> PARAMETER DESCRIPTION <code>file_path</code> <p>Path to JSON file (assumed to be array of objects)</p> <p> TYPE: <code>str</code> </p> <code>processor_func</code> <p>Function to process each chunk</p> <p> TYPE: <code>Callable[[List[Dict[str, Any]]], Any]</code> </p> RETURNS DESCRIPTION <code>Any</code> <p>Result of processing all chunks</p>"},{"location":"api/#aynse.nse.streaming_processor.StreamingProcessor.process_zip_file","title":"process_zip_file","text":"<pre><code>process_zip_file(zip_path: str, processor_func: Callable[[List[Dict[str, Any]]], Any], csv_filename: Optional[str] = None) -&gt; Any\n</code></pre> <p>Process CSV data from within a ZIP file in streaming chunks.</p> PARAMETER DESCRIPTION <code>zip_path</code> <p>Path to ZIP file</p> <p> TYPE: <code>str</code> </p> <code>processor_func</code> <p>Function to process each chunk</p> <p> TYPE: <code>Callable[[List[Dict[str, Any]]], Any]</code> </p> <code>csv_filename</code> <p>Specific CSV file within ZIP (if None, uses first CSV found)</p> <p> TYPE: <code>Optional[str]</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>Any</code> <p>Result of processing all chunks</p>"},{"location":"api/#aynse.nse.streaming_processor.StreamConfig","title":"aynse.nse.streaming_processor.StreamConfig  <code>dataclass</code>","text":"<pre><code>StreamConfig(chunk_size: int = 1000, max_memory_mb: int = 100, buffer_size: int = 8192, encoding: str = 'utf-8')\n</code></pre> <p>Configuration for streaming data processing</p>"},{"location":"api/#utilities","title":"Utilities","text":""},{"location":"api/#aynse.util.break_dates","title":"aynse.util.break_dates","text":"<pre><code>break_dates(from_date: date, to_date: date, max_days_per_chunk: int = 31) -&gt; List[Tuple[date, date]]\n</code></pre> <p>Break a date range into monthly chunks for efficient API calls.</p> <p>The NSE API typically limits requests to one month at a time, so this function splits larger date ranges into monthly chunks.</p> PARAMETER DESCRIPTION <code>from_date</code> <p>Start date of the range</p> <p> TYPE: <code>date</code> </p> <code>to_date</code> <p>End date of the range</p> <p> TYPE: <code>date</code> </p> <code>max_days_per_chunk</code> <p>Maximum days per chunk (default: 31)</p> <p> TYPE: <code>int</code> DEFAULT: <code>31</code> </p> RETURNS DESCRIPTION <code>List[Tuple[date, date]]</code> <p>List of (start_date, end_date) tuples for each chunk</p> RAISES DESCRIPTION <code>ValueError</code> <p>If from_date is after to_date</p> Example <p>from datetime import date break_dates(date(2024, 1, 15), date(2024, 3, 20)) [(date(2024, 1, 15), date(2024, 1, 31)),  (date(2024, 2, 1), date(2024, 2, 29)),  (date(2024, 3, 1), date(2024, 3, 20))]</p>"},{"location":"api/#aynse.util.cached","title":"aynse.util.cached","text":"<pre><code>cached(app_name: str) -&gt; Callable[[F], F]\n</code></pre> <p>Decorator for caching function results to disk.</p> <p>Results are stored as gzip-compressed pickle files in a user-specific cache directory. The cache key is generated from the function arguments.</p> PARAMETER DESCRIPTION <code>app_name</code> <p>Name of the application (used for cache directory)</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>Callable[[F], F]</code> <p>Decorator function</p> Environment Variables <p>J_CACHE_DIR: Override default cache directory</p> Example <p>@cached(\"myapp\") def expensive_function(symbol, date):     # ... expensive API call ...     return data</p>"},{"location":"api/#aynse.util.live_cache","title":"aynse.util.live_cache","text":"<pre><code>live_cache(func: F) -&gt; F\n</code></pre> <p>Decorator for time-based caching of live data functions.</p> <p>Caches the result of a function for a configurable timeout period. This is useful for live market data where we want to avoid hitting the API too frequently but still get reasonably fresh data.</p> <p>The decorated class must have a <code>time_out</code> attribute specifying the cache duration in seconds.</p> PARAMETER DESCRIPTION <code>func</code> <p>Method to cache (must be an instance method)</p> <p> TYPE: <code>F</code> </p> RETURNS DESCRIPTION <code>F</code> <p>Wrapped method with time-based caching</p> Example <p>class LiveData:     time_out = 5  # Cache for 5 seconds</p> <pre><code>@live_cache\ndef get_quote(self, symbol):\n    # ... expensive API call ...\n    return quote\n</code></pre>"},{"location":"api/#aynse.util.is_trading_day","title":"aynse.util.is_trading_day","text":"<pre><code>is_trading_day(dt: date, holidays_list: Optional[List[date]] = None) -&gt; bool\n</code></pre> <p>Check if a given date is a trading day.</p> <p>A trading day is a weekday (Monday-Friday) that is not a holiday.</p> PARAMETER DESCRIPTION <code>dt</code> <p>Date to check</p> <p> TYPE: <code>date</code> </p> <code>holidays_list</code> <p>Optional list of holiday dates. If None, uses            the holidays from the holidays module.</p> <p> TYPE: <code>Optional[List[date]]</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>bool</code> <p>True if the date is a trading day, False otherwise</p>"},{"location":"cli/","title":"Command-Line Interface","text":"<p><code>aynse</code> provides a comprehensive command-line interface for downloading NSE data without writing any code.</p>"},{"location":"cli/#installation","title":"Installation","text":"<p>The CLI is automatically installed with the package:</p> <pre><code>pip install aynse\n</code></pre> <p>Verify installation:</p> <pre><code>aynse --version\naynse --help\n</code></pre>"},{"location":"cli/#commands-overview","title":"Commands Overview","text":"Command Description <code>bhavcopy</code> Download daily bhavcopies (equity, F&amp;O, index) <code>stock</code> Download historical stock data <code>index</code> Download historical index data <code>derivatives</code> Download derivatives (futures/options) data <code>quote</code> Get live stock quote <code>holidays</code> List trading holidays"},{"location":"cli/#bhavcopy-downloads","title":"Bhavcopy Downloads","text":"<p>Download daily bhavcopies for equity, F&amp;O, or indices.</p> <pre><code>aynse bhavcopy --help\n</code></pre>"},{"location":"cli/#download-todays-bhavcopy","title":"Download Today's Bhavcopy","text":"<pre><code># Equity bhavcopy (works only after market hours)\naynse bhavcopy -d /path/to/directory\n\n# F&amp;O bhavcopy\naynse bhavcopy -d /path/to/directory --fo\n\n# Index bhavcopy\naynse bhavcopy -d /path/to/directory --idx\n\n# Full bhavcopy (with delivery data)\naynse bhavcopy -d /path/to/directory --full\n</code></pre>"},{"location":"cli/#download-for-specific-date","title":"Download for Specific Date","text":"<pre><code>aynse bhavcopy -d /path/to/directory -f 2024-01-15\n</code></pre>"},{"location":"cli/#download-date-range","title":"Download Date Range","text":"<pre><code># Equity bhavcopies for January 2024\naynse bhavcopy -d /path/to/directory -f 2024-01-01 -t 2024-01-31\n\n# F&amp;O bhavcopies for Q1 2024\naynse bhavcopy -d /path/to/directory -f 2024-01-01 -t 2024-03-31 --fo\n</code></pre>"},{"location":"cli/#options","title":"Options","text":"Option Short Description <code>--dest</code> <code>-d</code> Destination directory (required) <code>--from</code> <code>-f</code> From date (YYYY-MM-DD) <code>--to</code> <code>-t</code> To date (YYYY-MM-DD) <code>--fo</code> Download F&amp;O bhavcopy <code>--idx</code> Download index bhavcopy <code>--full</code> Download full bhavcopy with delivery data"},{"location":"cli/#historical-stock-data","title":"Historical Stock Data","text":"<p>Download historical OHLCV data for stocks.</p> <pre><code>aynse stock --help\n</code></pre>"},{"location":"cli/#examples","title":"Examples","text":"<pre><code># Basic usage\naynse stock -s RELIANCE -f 2024-01-01 -t 2024-03-31\n\n# With custom output file\naynse stock -s TCS -f 2024-01-01 -t 2024-03-31 -o tcs_q1_2024.csv\n\n# Different series (BE = trade-to-trade)\naynse stock -s RELIANCE -f 2024-01-01 -t 2024-03-31 -S BE\n</code></pre>"},{"location":"cli/#options_1","title":"Options","text":"Option Short Description <code>--symbol</code> <code>-s</code> Stock symbol (required) <code>--from</code> <code>-f</code> From date (required) <code>--to</code> <code>-t</code> To date (required) <code>--series</code> <code>-S</code> Series: EQ (default), BE, etc. <code>--output</code> <code>-o</code> Output file path"},{"location":"cli/#output-format","title":"Output Format","text":"<p>The CSV file contains:</p> <pre><code>DATE,SERIES,OPEN,HIGH,LOW,PREV. CLOSE,LTP,CLOSE,VWAP,52W H,52W L,VOLUME,VALUE,NO OF TRADES,SYMBOL\n</code></pre>"},{"location":"cli/#historical-index-data","title":"Historical Index Data","text":"<p>Download historical OHLC data for indices.</p> <pre><code>aynse index --help\n</code></pre>"},{"location":"cli/#examples_1","title":"Examples","text":"<pre><code># NIFTY 50\naynse index -s \"NIFTY 50\" -f 2024-01-01 -t 2024-03-31\n\n# Bank Nifty\naynse index -s \"NIFTY BANK\" -f 2024-01-01 -t 2024-03-31 -o banknifty.csv\n</code></pre>"},{"location":"cli/#options_2","title":"Options","text":"Option Short Description <code>--symbol</code> <code>-s</code> Index symbol (required) <code>--from</code> <code>-f</code> From date (required) <code>--to</code> <code>-t</code> To date (required) <code>--output</code> <code>-o</code> Output file path"},{"location":"cli/#derivatives-data","title":"Derivatives Data","text":"<p>Download historical data for futures and options.</p> <pre><code>aynse derivatives --help\n</code></pre>"},{"location":"cli/#stock-futures","title":"Stock Futures","text":"<pre><code>aynse derivatives -s SBIN -f 2024-01-01 -t 2024-01-30 -e 2024-01-25 -i FUTSTK\n</code></pre>"},{"location":"cli/#index-futures","title":"Index Futures","text":"<pre><code>aynse derivatives -s NIFTY -f 2024-01-01 -t 2024-01-30 -e 2024-01-25 -i FUTIDX\n</code></pre>"},{"location":"cli/#stock-options","title":"Stock Options","text":"<pre><code># Call option\naynse derivatives -s SBIN -f 2024-01-01 -t 2024-01-30 -e 2024-01-25 -i OPTSTK -p 750 --ce\n\n# Put option\naynse derivatives -s SBIN -f 2024-01-01 -t 2024-01-30 -e 2024-01-25 -i OPTSTK -p 700 --pe\n</code></pre>"},{"location":"cli/#index-options","title":"Index Options","text":"<pre><code># Call option\naynse derivatives -s NIFTY -f 2024-01-01 -t 2024-01-25 -e 2024-01-25 -i OPTIDX -p 21000 --ce\n\n# Put option\naynse derivatives -s NIFTY -f 2024-01-01 -t 2024-01-25 -e 2024-01-25 -i OPTIDX -p 21000 --pe\n</code></pre>"},{"location":"cli/#options_3","title":"Options","text":"Option Short Description <code>--symbol</code> <code>-s</code> Stock/Index symbol (required) <code>--from</code> <code>-f</code> From date (required) <code>--to</code> <code>-t</code> To date (required) <code>--expiry</code> <code>-e</code> Expiry date (required) <code>--instru</code> <code>-i</code> Instrument: FUTSTK, FUTIDX, OPTSTK, OPTIDX (required) <code>--price</code> <code>-p</code> Strike price (required for options) <code>--ce</code> Call option <code>--pe</code> Put option <code>--output</code> <code>-o</code> Output file path"},{"location":"cli/#live-quote","title":"Live Quote","text":"<p>Get real-time stock quote from the terminal.</p> <pre><code>aynse quote --help\n</code></pre>"},{"location":"cli/#example","title":"Example","text":"<pre><code>aynse quote -s RELIANCE\n</code></pre>"},{"location":"cli/#output","title":"Output","text":"<pre><code>Fetching quote for RELIANCE...\n\nSymbol: RELIANCE\nCompany: Reliance Industries Limited\n\nLast Price: \u20b92530.00\nChange: 40.00 (1.61%)\nOpen: \u20b92500.00\nHigh: \u20b92550.00\nLow: \u20b92480.00\nPrev Close: \u20b92490.00\n</code></pre>"},{"location":"cli/#trading-holidays","title":"Trading Holidays","text":"<p>List NSE trading holidays.</p> <pre><code>aynse holidays --help\n</code></pre>"},{"location":"cli/#examples_2","title":"Examples","text":"<pre><code># Current year\naynse holidays\n\n# Specific year\naynse holidays -y 2024\n</code></pre>"},{"location":"cli/#output_1","title":"Output","text":"<pre><code>Trading holidays for 2024:\n------------------------------\n  2024-01-22 (Monday)\n  2024-01-26 (Friday)\n  2024-03-08 (Friday)\n  ...\n\nTotal: 16 holidays\n</code></pre>"},{"location":"cli/#exit-codes","title":"Exit Codes","text":"Code Meaning 0 Success 1 Error (invalid arguments, API error, etc.)"},{"location":"cli/#error-handling","title":"Error Handling","text":"<p>The CLI provides helpful error messages:</p> <pre><code># File not found (holiday)\n$ aynse bhavcopy -d /tmp -f 2024-01-26\n\u2717 No data available for 2024-01-26 (might be a holiday)\n\n# Invalid symbol\n$ aynse quote -s INVALID\n\u2717 Error: No data found for symbol\n\n# Network timeout\n$ aynse stock -s RELIANCE -f 2024-01-01 -t 2024-03-31\n\u2717 Timeout while downloading. Check your internet connection.\n</code></pre>"},{"location":"cli/#tips","title":"Tips","text":"<ol> <li> <p>Use date ranges wisely: Large date ranges are automatically chunked, but smaller ranges are faster.</p> </li> <li> <p>Check holidays first: Use <code>aynse holidays -y YYYY</code> to see which dates might fail.</p> </li> <li> <p>Specify output files: Use <code>-o</code> to save to specific locations instead of auto-generated names.</p> </li> <li> <p>Progress indication: Long operations show progress bars for tracking.</p> </li> <li> <p>Batch downloads: Date range downloads run in parallel for speed.</p> </li> </ol>"},{"location":"data_calls/","title":"Data Calls Reference","text":"<p>Brief, canonical reference for all public data calls. Return types are noted succinctly.</p>"},{"location":"data_calls/#archives-aynsensearchives","title":"Archives (aynse.nse.archives)","text":"<ul> <li>bhavcopy_raw(dt: date) -&gt; str</li> <li>Equity bhavcopy CSV text for the given date.</li> <li> <p>Format: CSV string (columns per NSE CM bhavcopy).</p> </li> <li> <p>bhavcopy_save(dt: date, dest: str, skip_if_present=True) -&gt; str</p> </li> <li>Saves equity bhavcopy CSV to dest.</li> <li> <p>Returns file path.</p> </li> <li> <p>full_bhavcopy_raw(dt: date) -&gt; str</p> </li> <li>Full bhavcopy CSV text (includes delivery info).</li> <li> <p>Format: CSV string.</p> </li> <li> <p>full_bhavcopy_save(dt: date, dest: str, skip_if_present=True) -&gt; str</p> </li> <li> <p>Saves full bhavcopy CSV to dest; returns file path.</p> </li> <li> <p>bhavcopy_fo_raw(dt: date) -&gt; str</p> </li> <li> <p>F&amp;O bhavcopy CSV text for the given date.</p> </li> <li> <p>bhavcopy_fo_save(dt: date, dest: str, skip_if_present=True) -&gt; str</p> </li> <li> <p>Saves F&amp;O bhavcopy CSV; returns file path.</p> </li> <li> <p>bhavcopy_index_raw(dt: date) -&gt; str</p> </li> <li> <p>Index bhavcopy CSV text for the date (Nifty Indices).</p> </li> <li> <p>bhavcopy_index_save(dt: date, dest: str, skip_if_present=True) -&gt; str</p> </li> <li> <p>Saves index bhavcopy CSV; returns file path.</p> </li> <li> <p>index_constituent_raw(index_type: str) -&gt; str</p> </li> <li> <p>CSV text of constituents for an index (e.g., \"nifty50\").</p> </li> <li> <p>index_constituent_save(index_type: str, dest: str, skip_if_present=True) -&gt; str</p> </li> <li> <p>Saves constituents CSV; returns file path.</p> </li> <li> <p>index_constituent_save_all(dest: str, skip_if_present=True) -&gt; list[str]</p> </li> <li> <p>Saves constituents for all known indices; returns file paths.</p> </li> <li> <p>bulk_deals_raw(from_date: date, to_date: date) -&gt; dict</p> </li> <li>JSON for NSE bulk deals in date range.</li> <li> <p>Structure: {\"data\": [ ... records ... ], ...}</p> </li> <li> <p>bulk_deals_save(from_date: date, to_date: date, dest: str) -&gt; str</p> </li> <li> <p>Saves bulk deals JSON to file; returns file path.</p> </li> <li> <p>expiry_dates(dt: date, instrument_type: str = \"\", symbol: str = \"\", contracts: int = 0, months_ahead: int = 6) -&gt; list[date]</p> </li> <li>Algorithmic calculation of expiry dates honoring NSE policy changes.</li> </ul>"},{"location":"data_calls/#history-aynsensehistory","title":"History (aynse.nse.history)","text":"<ul> <li>stock_raw(symbol: str, from_date: date, to_date: date, series: str = \"EQ\") -&gt; list[dict]</li> <li>JSON-like list of rows from NSE \"historical cm equity\" API.</li> <li> <p>Keys include: CH_TIMESTAMP, CH_SERIES, CH_OPENING_PRICE, CH_TRADE_HIGH_PRICE, CH_TRADE_LOW_PRICE, CH_PREVIOUS_CLS_PRICE, CH_LAST_TRADED_PRICE, CH_CLOSING_PRICE, VWAP, CH_52WEEK_HIGH_PRICE, CH_52WEEK_LOW_PRICE, CH_TOT_TRADED_QTY, CH_TOT_TRADED_VAL, CH_TOTAL_TRADES, CH_SYMBOL.</p> </li> <li> <p>stock_df(symbol: str, from_date: date, to_date: date, series: str = \"EQ\") -&gt; pandas.DataFrame</p> </li> <li> <p>Columns: DATE, SERIES, OPEN, HIGH, LOW, PREV. CLOSE, LTP, CLOSE, VWAP, 52W H, 52W L, VOLUME, VALUE, NO OF TRADES, SYMBOL.</p> </li> <li> <p>stock_csv(symbol: str, from_date: date, to_date: date, series: str = \"EQ\", output: str = \"\", show_progress: bool = True) -&gt; str</p> </li> <li> <p>Saves CSV with same columns as stock_df; returns file path.</p> </li> <li> <p>derivatives_raw(symbol: str, from_date: date, to_date: date, expiry_date: date, instrument_type: str, strike_price: float | None, option_type: str | None) -&gt; list[dict]</p> </li> <li>JSON-like list from NSE \"historical fo derivatives\" API.</li> <li> <p>Keys include (subset): FH_TIMESTAMP, FH_EXPIRY_DT, FH_OPTION_TYPE (if options), FH_STRIKE_PRICE (if options), FH_OPENING_PRICE, FH_TRADE_HIGH_PRICE, FH_TRADE_LOW_PRICE, FH_CLOSING_PRICE, FH_LAST_TRADED_PRICE, FH_SETTLE_PRICE, FH_TOT_TRADED_QTY, FH_MARKET_LOT, FH_TOT_TRADED_VAL, FH_OPEN_INT, FH_CHANGE_IN_OI, FH_SYMBOL.</p> </li> <li> <p>derivatives_df(...) -&gt; pandas.DataFrame</p> </li> <li>FUT fields: DATE, EXPIRY, OPEN, HIGH, LOW, CLOSE, LTP, SETTLE PRICE, TOTAL TRADED QUANTITY, MARKET LOT, PREMIUM VALUE, OPEN INTEREST, CHANGE IN OI, SYMBOL.</li> <li> <p>OPT fields: DATE, EXPIRY, OPTION TYPE, STRIKE PRICE, OPEN, HIGH, LOW, CLOSE, LTP, SETTLE PRICE, TOTAL TRADED QUANTITY, MARKET LOT, PREMIUM VALUE, OPEN INTEREST, CHANGE IN OI, SYMBOL.</p> </li> <li> <p>derivatives_csv(...) -&gt; str</p> </li> <li> <p>Saves derivatives data to CSV; returns file path.</p> </li> <li> <p>index_raw(symbol: str, from_date: date, to_date: date) -&gt; list[dict]</p> </li> <li>Nifty Indices historical data via POST JSON; list of dict rows.</li> <li> <p>Typical keys: INDEX_NAME, HistoricalDate, OPEN, HIGH, LOW, CLOSE.</p> </li> <li> <p>index_pe_raw(symbol: str, from_date: date, to_date: date) -&gt; list[dict]</p> </li> <li> <p>Nifty Indices PE/PB/dividend data; keys include: pe, pb, divYield, DATE, Index Name.</p> </li> <li> <p>index_df(symbol: str, from_date: date, to_date: date) -&gt; pandas.DataFrame</p> </li> <li> <p>Typed dataframe from index_raw.</p> </li> <li> <p>index_pe_df(symbol: str, from_date: date, to_date: date) -&gt; pandas.DataFrame</p> </li> <li>Typed dataframe from index_pe_raw.</li> </ul>"},{"location":"data_calls/#live-aynsenselivenselive","title":"Live (aynse.nse.live.NSELive)","text":"<p>All return Python dicts parsed from NSE JSON unless noted.</p> <ul> <li>stock_quote(symbol: str) -&gt; dict</li> <li>stock_quote_fno(symbol: str) -&gt; dict</li> <li>trade_info(symbol: str) -&gt; dict</li> <li>market_status() -&gt; dict</li> <li>chart_data(symbol: str, indices: bool = False, flag: str = \"1D\") -&gt; dict</li> <li>tick_data(symbol: str, indices: bool = False, flag: str = \"1D\") -&gt; dict  (alias of chart_data)</li> <li>market_turnover() -&gt; dict</li> <li>eq_derivative_turnover(type: str = \"allcontracts\") -&gt; dict</li> <li>all_indices() -&gt; dict</li> <li>live_index(symbol: str = \"NIFTY 50\") -&gt; dict</li> <li>index_option_chain(symbol: str = \"NIFTY\") -&gt; dict  (option-chain-v3, auto-selects first expiry)</li> <li>equities_option_chain(symbol: str) -&gt; dict        (option-chain-v3, auto-selects first expiry)</li> <li>currency_option_chain(symbol: str = \"USDINR\") -&gt; dict</li> <li>live_fno() -&gt; dict  (alias: live_index(\"SECURITIES IN F&amp;O\"))</li> <li>pre_open_market(key: str = \"NIFTY\") -&gt; dict</li> <li>holiday_list() -&gt; dict</li> <li>corporate_announcements(segment: str = 'equities', from_date: date | None = None, to_date: date | None = None, symbol: str | None = None) -&gt; dict</li> </ul> <p>Notes: - Live methods are lightly cached (time-based) to reduce load. - HTTP client handles retries, priming, and pooling automatically.</p>"},{"location":"data_calls/#rbi-aynserbihistorical","title":"RBI (aynse.rbi.historical)","text":"<ul> <li>policy_rate_archive(n: int = 10) -&gt; list[dict]</li> <li>Scraped policy rate entries as list of dicts.</li> <li>Columns normalized to lowercase with underscores.</li> </ul>"},{"location":"data_calls/#batching-aynsenserequest_batcher","title":"Batching (aynse.nse.request_batcher)","text":"<ul> <li>batch_stock_requests(symbols: list[str], from_date: str, to_date: str, series: str = \"EQ\", batcher: RequestBatcher | None = None) -&gt; list[BatchResult]</li> <li>batch_index_requests(symbols: list[str], from_date: str, to_date: str, batcher: RequestBatcher | None = None) -&gt; list[BatchResult]</li> <li>batch_derivatives_requests(requests_data: list[dict], batcher: RequestBatcher | None = None) -&gt; list[BatchResult]</li> <li>BatchResult: { success: bool, data: Any, error: str | None, duration: float, retries: int }</li> </ul>"},{"location":"data_calls/#streaming-aynsensestreaming_processor","title":"Streaming (aynse.nse.streaming_processor)","text":"<ul> <li>StreamingProcessor.process_csv_file(file_path: str, processor_func, skip_header=True) -&gt; Any</li> <li>StreamingProcessor.process_json_file(file_path: str, processor_func) -&gt; Any</li> <li>stream_filter_data, stream_transform_data, stream_aggregate_data, create_data_generator(...)</li> <li>Generators and helpers for memory-efficient processing.</li> </ul>"},{"location":"historical/","title":"Historical Data","text":""},{"location":"historical/#download-bhavcopies","title":"Download Bhavcopies","text":"<p>You can download bhavcopies for stocks, indices, and futures &amp; options using <code>aynse</code>. The example below shows how to download different bhavcopies for January 1, 2024, and save them to a directory in CSV format.</p> <pre><code>from datetime import date\nfrom aynse.nse import bhavcopy_save, full_bhavcopy_save, bhavcopy_fo_save, bhavcopy_index_save\n\nbhavcopy_save(date(2024, 1, 1), \"/path/to/directory\")\nfull_bhavcopy_save(date(2024, 1, 1), \"/path/to/directory\")\nbhavcopy_fo_save(date(2024, 1, 1), \"/path/to/directory\")\nbhavcopy_index_save(date(2024, 1, 1), \"/path/to/directory\")\n</code></pre> <p>Note: The difference between <code>bhavcopy_save</code> and <code>full_bhavcopy_save</code> is that the full bhavcopy also includes the percentage of volume that was for delivery.</p>"},{"location":"historical/#download-index-constituents","title":"Download Index Constituents","text":"<p>Download the constituent stocks of various NSE indices.</p> <pre><code>from aynse.nse import index_constituent_save, index_constituent_save_all, index_constituent_raw\n\n# Download constituents for a specific index\nindex_constituent_save(\"nifty50\", \"/path/to/directory\")\n\n# Download raw constituents data as string\nraw_data = index_constituent_raw(\"nifty50\")\nprint(raw_data)\n\n# Download constituents for all available indices\nindex_constituent_save_all(\"/path/to/directory\")\n</code></pre>"},{"location":"historical/#download-bulk-deals-data","title":"Download Bulk Deals Data","text":"<p>Download bulk deals data for specific date ranges using the new bulk deals API.</p> <pre><code>from datetime import date\nfrom aynse.nse import bulk_deals_raw, bulk_deals_save\n\n# Download bulk deals data as JSON for a date range\nbulk_data = bulk_deals_raw(from_date=date(2024, 7, 1), \n                          to_date=date(2024, 7, 31))\nprint(f\"Found {len(bulk_data['data'])} bulk deals\")\n\n# Save bulk deals data to a JSON file\nbulk_deals_save(from_date=date(2024, 7, 1), \n               to_date=date(2024, 7, 31), \n               dest=\"/path/to/directory\")\n</code></pre>"},{"location":"historical/#download-historical-stock-data","title":"Download Historical Stock Data","text":"<pre><code>from datetime import date\nfrom aynse.nse import stock_csv, stock_df\n\n# Download as pandas dataframe\ndf = stock_df(symbol=\"RELIANCE\", from_date=date(2024, 1, 1),\n              to_date=date(2024, 1, 31), series=\"EQ\")\nprint(df.head())\n\n# Download data and save to a CSV file\nstock_csv(symbol=\"RELIANCE\", from_date=date(2024, 1, 1),\n          to_date=date(2024, 1, 31), series=\"EQ\", output=\"/path/to/file.csv\")\n</code></pre>"},{"location":"historical/#tips","title":"Tips","text":"<ul> <li>Large ranges are chunked month-by-month for reliability</li> <li>Retries with backoff are applied under the hood</li> <li>For many symbols, use the request batcher</li> </ul>"},{"location":"historical/#download-historical-index-data","title":"Download Historical Index Data","text":"<pre><code>from aynse.nse import index_csv, index_df, index_pe_df\n\n# Download as pandas dataframe\ndf = index_df(symbol=\"NIFTY 50\", from_date=date(2024, 1, 1),\n              to_date=date(2024, 1, 31))\nprint(df.head())\n\n# Download as a CSV file\nindex_csv(symbol=\"NIFTY 50\", from_date=date(2024, 1, 1),\n          to_date=date(2024, 1, 31), output=\"/path/to/file.csv\")\n\n# Download index P/E ratio data\npe_df = index_pe_df(symbol=\"NIFTY 50\", from_date=date(2024, 1, 1),\n                   to_date=date(2024, 1, 31))\nprint(pe_df.head())\n</code></pre>"},{"location":"historical/#download-historical-derivatives-data","title":"Download Historical Derivatives Data","text":""},{"location":"historical/#get-expiry-dates","title":"Get Expiry Dates","text":"<p>For a given day, fetch expiry dates of all active contracts.</p> <pre><code>from datetime import date\nfrom aynse.nse import expiry_dates\n\nexpiries = expiry_dates(date(2024, 1, 1))\nprint(expiries)\n</code></pre> <p>You can filter it further based on the contract type (e.g., <code>OPTIDX</code>, <code>FUTSTK</code>).</p> <pre><code>from datetime import date\nfrom aynse.nse import expiry_dates\n\nexpiries = expiry_dates(date(2024, 1, 1), \"FUTSTK\")\nprint(expiries)\n</code></pre>"},{"location":"historical/#master-functions-for-derivatives-data","title":"Master Functions for Derivatives Data","text":"<p>Use <code>derivatives_df</code> to download historical data for a given contract into a pandas DataFrame.</p> <pre><code>def derivatives_df(symbol, from_date, to_date, expiry_date, instrument_type, option_type, strike_price):\n    \"\"\"\n    Downloads historical data for a given contract into a pandas dataframe.\n\n    Args:\n        symbol (str): Stock symbol (e.g., \"SBIN\" or \"NIFTY\").\n        from_date (datetime.date): Start date.\n        to_date (datetime.date): End date.\n        expiry_date (datetime.date): Expiry date.\n        instrument_type (str): \"FUTSTK\", \"FUTIDX\", \"OPTSTK\", or \"OPTIDX\".\n        option_type (str): \"CE\" for call or \"PE\" for put (required for options).\n        strike_price (float): Strike price (required for options).\n    \"\"\"\n</code></pre> <p>To download as a CSV file, use <code>derivatives_csv</code> and provide an <code>output</code> path.</p>"},{"location":"historical/#stock-futures","title":"Stock Futures","text":"<pre><code>from aynse.nse import derivatives_df\n\ndf = derivatives_df(symbol=\"RELIANCE\", from_date=date(2024, 1, 1), to_date=date(2024, 1, 31),\n                    expiry_date=date(2024, 1, 25), instrument_type=\"FUTSTK\")\nprint(df.head())\n</code></pre>"},{"location":"historical/#stock-options","title":"Stock Options","text":"<pre><code>from aynse.nse import derivatives_df\n\ndf = derivatives_df(symbol=\"RELIANCE\", from_date=date(2024, 1, 1), to_date=date(2024, 1, 31),\n                    expiry_date=date(2024, 1, 25), instrument_type=\"OPTSTK\", \n                    option_type=\"CE\", strike_price=2800)\nprint(df.head())\n</code></pre>"},{"location":"historical/#index-futures","title":"Index Futures","text":"<pre><code>from aynse.nse import derivatives_df\n\ndf = derivatives_df(symbol=\"NIFTY\", from_date=date(2024, 1, 1), to_date=date(2024, 1, 31),\n                    expiry_date=date(2024, 1, 25), instrument_type=\"FUTIDX\")\nprint(df.head())\n</code></pre>"},{"location":"historical/#index-options","title":"Index Options","text":"<pre><code>from aynse.nse import derivatives_df\n\ndf = derivatives_df(symbol=\"NIFTY\", from_date=date(2024, 1, 1), to_date=date(2024, 1, 31),\n                    expiry_date=date(2024, 1, 25), instrument_type=\"OPTIDX\", \n                    option_type=\"CE\", strike_price=21000)\nprint(df.head())\n</code></pre>"},{"location":"historical/#bulk-derivatives-operations","title":"Bulk Derivatives Operations","text":"<p>For advanced users who need to fetch data for multiple derivatives contracts concurrently, <code>aynse</code> provides bulk fetching capabilities through the <code>NSEHistory</code> class.</p>"},{"location":"historical/#bulk-historical-derivatives-data","title":"Bulk Historical Derivatives Data","text":"<pre><code>from datetime import date\nfrom aynse.nse.history import NSEHistory\n\n# Create NSEHistory instance\nnse_history = NSEHistory()\n\n# Define multiple derivatives requests\nrequests_list = [\n    {\n        'symbol': 'RELIANCE',\n        'from_date': date(2024, 1, 1),\n        'to_date': date(2024, 1, 31),\n        'expiry_date': date(2024, 1, 25),\n        'instrument_type': 'FUTSTK'\n    },\n    {\n        'symbol': 'TCS',\n        'from_date': date(2024, 1, 1), \n        'to_date': date(2024, 1, 31),\n        'expiry_date': date(2024, 1, 25),\n        'instrument_type': 'FUTSTK'\n    },\n    {\n        'symbol': 'NIFTY',\n        'from_date': date(2024, 1, 1),\n        'to_date': date(2024, 1, 31), \n        'expiry_date': date(2024, 1, 25),\n        'instrument_type': 'FUTIDX'\n    }\n]\n\n# Fetch all contracts concurrently\nbulk_results = nse_history.bulk_derivatives_raw(requests_list, max_workers=3)\n\n# Process results\nfor result in bulk_results:\n    if 'error' in result:\n        print(f\"Error for {result['request']['symbol']}: {result['error']}\")\n    else:\n        print(f\"Downloaded {len(result['data'])} records for {result['request']['symbol']}\")\n</code></pre>"},{"location":"historical/#historical-options-analysis-around-earnings","title":"Historical Options Analysis Around Earnings","text":"<pre><code>from datetime import date\nfrom aynse.nse.history import NSEHistory\n\n# Create NSEHistory instance\nnse_history = NSEHistory()\n\n# Analyze options around earnings announcement\nearnings_analysis = nse_history.get_earnings_options_historical(\n    symbol='RELIANCE',\n    earnings_date=date(2024, 1, 19),\n    expiry_date=date(2024, 1, 25),\n    strike_prices=[2800, 2850, 2900, 2950, 3000],  # List of strike prices\n    days_around=7  # Days before/after earnings\n)\n\nprint(f\"Analyzed {len(earnings_analysis)} strike prices\")\nfor strike, data in earnings_analysis.items():\n    print(f\"Strike {strike}: {len(data['CE'])} CE records, {len(data['PE'])} PE records\")\n</code></pre>"},{"location":"live/","title":"Live Data","text":"<p>The <code>NSELive</code> class provides real-time market data from NSE including stock quotes, option chains, market status, and more.</p>"},{"location":"live/#getting-started","title":"Getting Started","text":"<pre><code>from aynse import NSELive\n\nlive = NSELive()\n</code></pre>"},{"location":"live/#stock-quotes","title":"Stock Quotes","text":""},{"location":"live/#basic-quote","title":"Basic Quote","text":"<pre><code>quote = live.stock_quote(\"RELIANCE\")\n\n# Access price information\nprice_info = quote['priceInfo']\nprint(f\"Last Price: \u20b9{price_info['lastPrice']}\")\nprint(f\"Change: {price_info['change']} ({price_info['pChange']}%)\")\nprint(f\"Open: \u20b9{price_info['open']}\")\nprint(f\"Day High: \u20b9{price_info['intraDayHighLow']['max']}\")\nprint(f\"Day Low: \u20b9{price_info['intraDayHighLow']['min']}\")\nprint(f\"Previous Close: \u20b9{price_info['previousClose']}\")\n\n# Access company info\ninfo = quote['info']\nprint(f\"Company: {info['companyName']}\")\nprint(f\"Industry: {info['industry']}\")\nprint(f\"ISIN: {info['isin']}\")\n</code></pre>"},{"location":"live/#fo-quote","title":"F&amp;O Quote","text":"<p>Get quote with F&amp;O details:</p> <pre><code>fno_quote = live.stock_quote_fno(\"RELIANCE\")\n\nprint(f\"Available Strike Prices: {fno_quote['strikePrices']}\")\nprint(f\"Available Expiries: {fno_quote['expiryDates']}\")\n</code></pre>"},{"location":"live/#trade-info","title":"Trade Info","text":"<p>Get detailed trading information:</p> <pre><code>trade_info = live.trade_info(\"RELIANCE\")\n\n# Bulk/Block deals\nprint(f\"Bulk Deals: {trade_info['bulkBlockDeals']}\")\n\n# Order book\norder_book = trade_info['marketDeptOrderBook']\nprint(f\"Total Buy Qty: {order_book['totalBuyQuantity']}\")\nprint(f\"Total Sell Qty: {order_book['totalSellQuantity']}\")\n</code></pre>"},{"location":"live/#market-status","title":"Market Status","text":"<pre><code>status = live.market_status()\n\nfor market in status['marketState']:\n    print(f\"{market['market']}: {market['marketStatus']}\")\n</code></pre>"},{"location":"live/#option-chains","title":"Option Chains","text":""},{"location":"live/#index-option-chain-v3","title":"Index Option Chain (v3)","text":"<pre><code># NIFTY option chain (uses option-chain-v3; auto-selects first expiry)\nchain = live.index_option_chain(\"NIFTY\")\n\nrecords = chain['records']\nprint(f\"Expiry Dates: {records['expiryDates']}\")\nprint(f\"Strike Prices: {records['strikePrices']}\")\n\n# Get ATM (at-the-money) data\natm = chain['filtered']['data']\nfor strike in atm[:5]:\n    ce = strike.get('CE', {})\n    pe = strike.get('PE', {})\n    print(f\"Strike {strike['strikePrice']}: CE OI={ce.get('openInterest', 0)}, PE OI={pe.get('openInterest', 0)}\")\n</code></pre>"},{"location":"live/#equity-option-chain-v3","title":"Equity Option Chain (v3)","text":"<pre><code># RELIANCE option chain (uses option-chain-v3; auto-selects first expiry)\nchain = live.equities_option_chain(\"RELIANCE\")\n\nrecords = chain['records']\nfor strike_data in records['data'][:5]:\n    print(f\"Strike: {strike_data['strikePrice']}\")\n</code></pre>"},{"location":"live/#currency-option-chain","title":"Currency Option Chain","text":"<pre><code>chain = live.currency_option_chain(\"USDINR\")\nprint(f\"Expiry Dates: {chain['records']['expiryDates']}\")\n</code></pre>"},{"location":"live/#indices-data","title":"Indices Data","text":""},{"location":"live/#all-indices","title":"All Indices","text":"<pre><code>indices = live.all_indices()\n\nprint(f\"Advances: {indices['advances']}\")\nprint(f\"Declines: {indices['declines']}\")\n\nfor idx in indices['data'][:5]:\n    print(f\"{idx['index']}: {idx['last']} ({idx['percentChange']}%)\")\n</code></pre>"},{"location":"live/#live-index-data","title":"Live Index Data","text":"<pre><code># Get NIFTY 50 data with all constituents\nnifty = live.live_index(\"NIFTY 50\")\n\nprint(f\"NIFTY 50: {nifty['data'][0]['last']}\")\nprint(f\"Advances: {nifty['advance']['advances']}\")\nprint(f\"Declines: {nifty['advance']['declines']}\")\n\n# Top gainers/losers\nfor stock in nifty['data'][1:6]:\n    print(f\"{stock['symbol']}: {stock['pChange']}%\")\n</code></pre>"},{"location":"live/#fo-securities","title":"F&amp;O Securities","text":"<pre><code>fno = live.live_fno()\nprint(f\"Total F&amp;O Securities: {len(fno['data'])}\")\n</code></pre>"},{"location":"live/#pre-open-market","title":"Pre-Open Market","text":"<pre><code>preopen = live.pre_open_market(\"NIFTY\")\n\nprint(f\"Advances: {preopen['advances']}\")\nprint(f\"Declines: {preopen['declines']}\")\nprint(f\"Unchanged: {preopen['unchanged']}\")\n\n# Pre-open prices\nfor stock in preopen['data'][:5]:\n    meta = stock['metadata']\n    print(f\"{meta['symbol']}: \u20b9{meta['lastPrice']} ({meta['pChange']}%)\")\n</code></pre>"},{"location":"live/#charttick-data","title":"Chart/Tick Data","text":"<p>Get intraday tick data for charting. NSE recently shifted these to their NextApi endpoints; the client handles the right URL/params for you.</p> <pre><code># Stock tick data (equity) \u2013 uses getSymbolChartData under the hood\nticks = live.tick_data(\"RELIANCE\")          # default flag=\"1D\"\nchart_data = ticks['grapthData']            # Note: NSE typo in response\n\n# Index tick data \u2013 uses getGraphChart with flag=\"1D\"\nindex_ticks = live.tick_data(\"NIFTY 50\", indices=True)\n\n# Alternate timeframes (if needed)\nweek_ticks = live.tick_data(\"RELIANCE\", flag=\"5D\")\n</code></pre>"},{"location":"live/#market-turnover","title":"Market Turnover","text":"<pre><code>turnover = live.market_turnover()\nprint(turnover)\n</code></pre>"},{"location":"live/#derivatives-turnover","title":"Derivatives Turnover","text":"<pre><code># All contracts\nturnover = live.eq_derivative_turnover()\nprint(f\"Value: {turnover['value']}\")\nprint(f\"Volume: {turnover['volume']}\")\n\n# Specific segment\nnifty_turnover = live.eq_derivative_turnover(type=\"fu_nifty50\")\n</code></pre>"},{"location":"live/#corporate-announcements","title":"Corporate Announcements","text":"<pre><code>from datetime import date\n\n# All announcements\nannouncements = live.corporate_announcements()\n\n# Filter by date range\nannouncements = live.corporate_announcements(\n    from_date=date(2024, 1, 1),\n    to_date=date(2024, 1, 31)\n)\n\n# Filter by symbol\nannouncements = live.corporate_announcements(symbol=\"RELIANCE\")\n</code></pre>"},{"location":"live/#trading-holidays","title":"Trading Holidays","text":"<pre><code>holidays = live.holiday_list()\n\n# CM (Capital Market) holidays\nfor holiday in holidays.get('CM', []):\n    print(f\"{holiday['tradingDate']}: {holiday['description']}\")\n</code></pre>"},{"location":"live/#bulk-operations","title":"Bulk Operations","text":""},{"location":"live/#multiple-option-chains","title":"Multiple Option Chains","text":"<p>Fetch option chains for multiple stocks concurrently:</p> <pre><code>symbols = [\"RELIANCE\", \"TCS\", \"INFY\", \"HDFC\", \"SBIN\"]\nresults = live.bulk_equities_option_chain(symbols, max_workers=3)\n\nprint(f\"Successful: {results['summary']['successful']}\")\nprint(f\"Failed: {results['summary']['failed']}\")\n\nfor symbol, data in results['success'].items():\n    print(f\"{symbol}: {len(data['records']['data'])} strikes\")\n</code></pre>"},{"location":"live/#options-around-earnings","title":"Options Around Earnings","text":"<p>Analyze options around earnings dates:</p> <pre><code>from datetime import date\n\nanalysis = live.get_options_around_date(\n    symbol=\"RELIANCE\",\n    target_date=date(2024, 1, 19),  # Earnings date\n    days_before=5,\n    days_after=5\n)\n\nprint(f\"Primary Expiry: {analysis['primary_expiry']}\")\nprint(f\"Relevant Expiries: {len(analysis['relevant_expiries'])}\")\n</code></pre>"},{"location":"live/#bulk-earnings-analysis","title":"Bulk Earnings Analysis","text":"<pre><code>stocks_and_dates = [\n    (\"RELIANCE\", date(2024, 1, 19)),\n    (\"TCS\", date(2024, 1, 11)),\n    (\"INFY\", date(2024, 1, 12)),\n]\n\nresults = live.analyze_earnings_options(stocks_and_dates, max_workers=3)\n\nfor symbol, analysis in results.items():\n    if 'error' not in analysis:\n        print(f\"{symbol}: {analysis['analysis']['total_strikes']} strikes\")\n</code></pre>"},{"location":"live/#caching-behavior","title":"Caching Behavior","text":"<p>Live data methods use time-based caching to prevent excessive API calls:</p> <ul> <li>Default cache timeout: 5 seconds</li> <li>Cache is per-method and per-arguments</li> <li>Cache automatically expires and refreshes</li> </ul> <pre><code># First call - fetches from API\nquote1 = live.stock_quote(\"RELIANCE\")\n\n# Within 5 seconds - returns cached data\nquote2 = live.stock_quote(\"RELIANCE\")  # Same object\n\n# After 5 seconds - fetches fresh data\nimport time\ntime.sleep(6)\nquote3 = live.stock_quote(\"RELIANCE\")  # Fresh fetch\n</code></pre> <p>You can customize the timeout:</p> <pre><code>live = NSELive()\nlive.time_out = 10  # Cache for 10 seconds\n</code></pre>"},{"location":"live/#error-handling","title":"Error Handling","text":"<pre><code>from aynse import NSELive\nfrom aynse.nse.http_client import CircuitOpenError\n\nlive = NSELive()\n\ntry:\n    quote = live.stock_quote(\"INVALID_SYMBOL\")\nexcept Exception as e:\n    print(f\"Error fetching quote: {e}\")\n\n# Circuit breaker opens after repeated failures\ntry:\n    # After many failures...\n    quote = live.stock_quote(\"RELIANCE\")\nexcept CircuitOpenError:\n    print(\"Circuit breaker is open, wait before retrying\")\n</code></pre>"},{"location":"live/#notes","title":"Notes","text":"<ul> <li>Live endpoints are automatically rate-limited</li> <li>The HTTP client handles retries with exponential backoff</li> <li>Session cookies are managed automatically (NSE requires specific cookies)</li> <li>All responses are cached briefly to reduce API load</li> </ul>"}]}