{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"<code>aynse</code>","text":"<p>Lean, modern NSE data library with resilient networking.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Historical and derivatives data</li> <li>Bhavcopy downloads (Equity, F&amp;O, Index)</li> <li>Live market data</li> <li>CLI helpers</li> <li>Resilient HTTP client (HTTP/2, retries, pooling)</li> </ul>"},{"location":"#install","title":"Install","text":"<pre><code>pip install aynse\n</code></pre>"},{"location":"#quick-start","title":"Quick Start","text":"<pre><code>from datetime import date\nfrom aynse.nse import stock_df\n\ndf = stock_df(\"RELIANCE\", date(2024,1,1), date(2024,1,31))\nprint(df.head())\n</code></pre>"},{"location":"#http-client-advanced","title":"HTTP Client (advanced)","text":"<pre><code>from aynse.nse.connection_pool import get_connection_pool\nclient = get_connection_pool().get_client(\"https://www.nseindia.com\")\ndata = client.get_json(\"/api/marketStatus\")\n</code></pre> <p>See <code>historical.md</code> and <code>live.md</code> for more.</p>"},{"location":"api/","title":"API Reference","text":"<p>This page contains the auto-generated API reference for <code>aynse</code>.</p>"},{"location":"api/#aynse.nse","title":"<code>aynse.nse</code>","text":""},{"location":"api/#aynse.nse.NSEArchives","title":"<code>NSEArchives</code>","text":""},{"location":"api/#aynse.nse.NSEArchives.cutoff_date","title":"<code>cutoff_date = date(2024, 7, 8)</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":"<p>Conventions    d - 1, 12 (without leading zero)   dd - 01, 21 (day of the month with leading zero)   mm - 01, 12 (month with leading zero)    m - 1, 12 (month without leading zero)  MMM - JAN, DEC   yy - 19, 20 yyyy - 2020, 2030</p>"},{"location":"api/#aynse.nse.NSEArchives.bhavcopy_fo_raw","title":"<code>bhavcopy_fo_raw(dt)</code>","text":"<p>Downloads raw F&amp;O bhavcopy text for a specific date</p>"},{"location":"api/#aynse.nse.NSEArchives.bhavcopy_fo_save","title":"<code>bhavcopy_fo_save(dt, dest, skip_if_present=True)</code>","text":"<p>Saves Derivatives Bhavcopy to a directory</p>"},{"location":"api/#aynse.nse.NSEArchives.bhavcopy_raw","title":"<code>bhavcopy_raw(dt, as_dataframe=False)</code>","text":"<p>Downloads raw bhavcopy text for a specific date</p> <p>Uses new NSE API endpoints with date-based format switching. - Before July 8, 2024: Uses old CSV format API - After July 8, 2024: Uses new ZIP format API with different structure</p> <p>Issues identified: - Complex nested ZIP processing could be optimized - Large files loaded entirely into memory - No streaming for large files - Repeated file extension checks</p> <p>Parameters:</p> Name Type Description Default <code>dt</code> <code>date</code> <p>Date for bhavcopy</p> required <code>as_dataframe</code> <code>bool</code> <p>If True, returns a pandas DataFrame. If False, returns CSV text.</p> <code>False</code>"},{"location":"api/#aynse.nse.NSEArchives.bhavcopy_save","title":"<code>bhavcopy_save(dt, dest, skip_if_present=True)</code>","text":"<p>Downloads and saves raw bhavcopy csv file for a specific date</p> <p>Uses new NSE API endpoints with automatic fallback to old archives.</p>"},{"location":"api/#aynse.nse.NSEArchives.bulk_deals_raw","title":"<code>bulk_deals_raw(from_date, to_date)</code>","text":"<p>Downloads bulk deals for a given date range. :param from_date: From date :param to_date: To date :return: JSON response from the API</p>"},{"location":"api/#aynse.nse.NSEArchives.bulk_deals_save","title":"<code>bulk_deals_save(from_date, to_date, dest)</code>","text":"<p>Saves bulk deals for a given date range to a JSON file. :param from_date: From date :param to_date: To date :param dest: Destination directory :return: Path to the saved file</p>"},{"location":"api/#aynse.nse.NSEArchives.full_bhavcopy_raw","title":"<code>full_bhavcopy_raw(dt)</code>","text":"<p>Downloads full raw bhavcopy text for a specific date. This uses the new API endpoint and works for all dates without a cutoff. The endpoint directly returns the CSV content.</p>"},{"location":"api/#aynse.nse.NSEArchives.get","title":"<code>get(rout, **params)</code>","text":"<p>Make API request with automatic retry and session management</p>"},{"location":"api/#aynse.nse.NSEHistory","title":"<code>NSEHistory</code>","text":""},{"location":"api/#aynse.nse.NSEHistory.derivatives_raw","title":"<code>derivatives_raw(symbol, from_date, to_date, expiry_date, instrument_type, strike_price, option_type)</code>","text":"<p>Fetch raw derivatives data for date range.</p> <p>Issues identified: - Same issues as stock_raw - reversed ranges, no validation, no progress - Complex parameter validation could be done earlier</p>"},{"location":"api/#aynse.nse.NSEHistory.stock_raw","title":"<code>stock_raw(symbol, from_date, to_date, series='EQ')</code>","text":"<p>Fetch raw stock data for date range.</p> <p>Issues identified: - Reversed date ranges may not be necessary and could impact caching - No progress indication for large date ranges - Memory usage grows with large date ranges - No validation of input parameters</p>"},{"location":"api/#aynse.nse.NSEHttpClient","title":"<code>NSEHttpClient</code>","text":"<p>Sync HTTP client for NSE.</p>"},{"location":"api/#aynse.nse.NSEIndexConstituents","title":"<code>NSEIndexConstituents</code>","text":"<p>               Bases: <code>NSEArchives</code></p> <p>NSE Index constituents https://niftyindices.com/indices/equity/broad-based-indices/NIFTY--50 Index constituent link https://niftyindices.com/IndexConstituent/ind_nifty50list.csv Args:     NSEArchives (class): Base class</p>"},{"location":"api/#aynse.nse.NSEIndexConstituents.index_constituent_raw","title":"<code>index_constituent_raw(index_type=str)</code>","text":"<p>Downloads raw index constituent text for a specific index</p>"},{"location":"api/#aynse.nse.NSEIndexConstituents.index_constituent_save","title":"<code>index_constituent_save(index_type, dest, skip_if_present=True)</code>","text":"<p>Downloads and saves index constituent csv for a specific index</p>"},{"location":"api/#aynse.nse.NSEIndexConstituents.index_constituent_save_all","title":"<code>index_constituent_save_all(dest, skip_if_present=True)</code>","text":"<p>Downloads and saves index constituent csv for all known indexes</p>"},{"location":"api/#aynse.nse.NSEIndexHistory","title":"<code>NSEIndexHistory</code>","text":"<p>               Bases: <code>NSEHistory</code></p>"},{"location":"api/#aynse.nse.NSEIndices","title":"<code>NSEIndices</code>","text":"<p>List of NSE indices</p>"},{"location":"api/#aynse.nse.NSEIndices.get_indices_with_underscores","title":"<code>get_indices_with_underscores()</code>  <code>classmethod</code>","text":"<p>Returns a list of indices with underscores</p>"},{"location":"api/#aynse.nse.NSEIndices.get_indices_without_underscores","title":"<code>get_indices_without_underscores()</code>  <code>classmethod</code>","text":"<p>Returns a list of indices without underscores</p>"},{"location":"api/#aynse.nse.NSEIndicesArchives","title":"<code>NSEIndicesArchives</code>","text":"<p>               Bases: <code>NSEArchives</code></p>"},{"location":"api/#aynse.nse.NSEIndicesArchives.bhavcopy_index_raw","title":"<code>bhavcopy_index_raw(dt)</code>","text":"<p>Downloads raw index bhavcopy text for a specific date</p>"},{"location":"api/#aynse.nse.NSEIndicesArchives.bhavcopy_index_save","title":"<code>bhavcopy_index_save(dt, dest, skip_if_present=True)</code>","text":"<p>Downloads and saves index bhavcopy csv for a specific date</p>"},{"location":"api/#aynse.nse.NSELive","title":"<code>NSELive</code>","text":""},{"location":"api/#aynse.nse.NSELive.__init__","title":"<code>__init__()</code>","text":"<p>Initialize NSELive with centralized HTTP client</p>"},{"location":"api/#aynse.nse.NSELive.analyze_earnings_options","title":"<code>analyze_earnings_options(symbols_and_dates, max_workers=3)</code>","text":"<p>Analyze option chains for multiple stocks around their earnings dates.</p> <p>Parameters:</p> Name Type Description Default <code>symbols_and_dates</code> <code>list</code> <p>List of tuples (symbol, earnings_date)</p> required <code>max_workers</code> <code>int</code> <p>Maximum concurrent requests</p> <code>3</code> <p>Returns:</p> Name Type Description <code>dict</code> <p>Analysis results for each symbol</p>"},{"location":"api/#aynse.nse.NSELive.bulk_equities_option_chain","title":"<code>bulk_equities_option_chain(symbols, max_workers=3)</code>","text":"<p>Fetch option chains for multiple equity symbols concurrently.</p> <p>Parameters:</p> Name Type Description Default <code>symbols</code> <code>list</code> <p>List of equity symbols</p> required <code>max_workers</code> <code>int</code> <p>Maximum number of concurrent requests</p> <code>3</code> <p>Returns:</p> Name Type Description <code>dict</code> <p>Dictionary with symbol as key and option chain data as value</p>"},{"location":"api/#aynse.nse.NSELive.corporate_announcements","title":"<code>corporate_announcements(segment='equities', from_date=None, to_date=None, symbol=None)</code>","text":"<p>This function returns the corporate annoucements  (https://www.nseindia.com/companies-listing/corporate-filings-announcements)</p>"},{"location":"api/#aynse.nse.NSELive.get","title":"<code>get(route, payload={})</code>","text":"<p>Make API request using centralized client with retries and validation</p>"},{"location":"api/#aynse.nse.NSELive.get_options_around_date","title":"<code>get_options_around_date(symbol, target_date, days_before=5, days_after=5)</code>","text":"<p>Get option chain data and analyze it in context of a target date (like earnings).</p> <p>Parameters:</p> Name Type Description Default <code>symbol</code> <code>str</code> <p>Equity symbol</p> required <code>target_date</code> <code>date</code> <p>Target date (e.g., earnings date)</p> required <code>days_before</code> <code>int</code> <p>Days before target date to consider</p> <code>5</code> <code>days_after</code> <code>int</code> <p>Days after target date to consider</p> <code>5</code> <p>Returns:</p> Name Type Description <code>dict</code> <p>Analysis of options around the target date</p>"},{"location":"api/#aynse.nse.expiry_dates","title":"<code>expiry_dates(dt, instrument_type='', symbol='', contracts=0, months_ahead=6)</code>","text":"<p>Algorithmically calculate expiry dates based on NSE rules.</p> <p>Parameters:</p> Name Type Description Default <code>dt</code> <p>Reference date for calculation</p> required <code>instrument_type</code> <p>Type of derivative instrument (e.g., \"FUTIDX\", \"OPTIDX\", \"FUTSTK\", \"OPTSTK\")</p> <code>''</code> <code>symbol</code> <p>Symbol name (used to determine contract cycle)</p> <code>''</code> <code>contracts</code> <p>Minimum open interest filter (deprecated in algorithmic approach)</p> <code>0</code> <code>months_ahead</code> <p>Number of months ahead to calculate expiries for</p> <code>6</code> <p>Returns:</p> Type Description <p>List of expiry dates</p>"},{"location":"api/#aynse.nse.live_cache","title":"<code>live_cache(app_name)</code>","text":"<p>Caches the output for time_out specified. This is done in order to prevent hitting live quote requests to NSE too frequently. This wrapper will fetch the quote/live result first time and return the same result for any calls within 'time_out' seconds.</p> <p>Issues identified: - Cache key generation is fragile and may not handle complex arguments properly - No cache size limits - could grow indefinitely with many different parameters - Exception handling is too broad and may hide real issues - Cache cleanup is not implemented</p> Logic <p>key = concat of args try:     cached_value = self._cache[key]     if now - self._cache['timestamp'] &lt; time_out         return cached_value['value'] except AttributeError: # _cache attribute has not been created yet     self._cache = {} except KeyError: # Cache key doesn't exist     pass finally:     val = fetch-new-value     new_value = {'timestamp': now, 'value': val}     self._cache[key] = new_value     return val</p>"},{"location":"api/#aynse.holidays","title":"<code>aynse.holidays</code>","text":""},{"location":"api/#aynse.rbi","title":"<code>aynse.rbi</code>","text":""},{"location":"api/#aynse.rbi.RBI","title":"<code>RBI</code>","text":""},{"location":"api/#aynse.rbi.RBI.current_rates","title":"<code>current_rates()</code>","text":"<p>DEPRECATED: This function is broken because of website changes.</p>"},{"location":"api/#http-client","title":"HTTP Client","text":"<p>The library includes resilient HTTP clients:</p> <ul> <li><code>aynse.nse.http_client.NSEHttpClient</code></li> <li><code>aynse.nse.http_client.NSEAsyncHttpClient</code></li> </ul> <p>Acquire clients via the connection pool:</p> <pre><code>from aynse.nse.connection_pool import get_connection_pool\npool = get_connection_pool()\nclient = pool.get_client(\"https://www.nseindia.com\")\ndata = client.get_json(\"/api/marketStatus\")\n</code></pre>"},{"location":"cli/","title":"Command-Line Interface","text":"<p><code>aynse</code> comes with a powerful command-line interface. Simply type <code>aynse --help</code> to explore all available options.</p> <pre><code>aynse --help\n</code></pre>"},{"location":"cli/#download-bhavcopies","title":"Download Bhavcopies","text":"<pre><code>aynse bhavcopy --help\n</code></pre> <p>Download today's bhavcopy: (Works only after market hours)</p> <pre><code>aynse bhavcopy -d /path/to/dir\n</code></pre> <p>Download bhavcopy for a specific date:</p> <pre><code>aynse bhavcopy -d /path/to/dir -f 2024-01-01\n</code></pre> <p>Download all bhavcopies between a date range:</p> <pre><code>aynse bhavcopy -d /path/to/dir -f 2024-01-01 -t 2024-01-31\n</code></pre> <p>Download full bhavcopies with delivery trade quantity:</p> <pre><code>aynse bhavcopy -d /path/to/dir -f 2024-01-01 -t 2024-01-31 --full\n</code></pre> <p>Download index bhavcopies:</p> <pre><code>aynse bhavcopy -d /path/to/dir -f 2024-01-01 -t 2024-01-31 --idx\n</code></pre> <p>Download derivatives bhavcopies:</p> <pre><code>aynse bhavcopy -d /path/to/dir -f 2024-01-01 -t 2024-01-31 --fo\n</code></pre>"},{"location":"cli/#download-historical-stock-data","title":"Download Historical Stock Data","text":"<pre><code>aynse stock --help\n</code></pre> <p>Download historical stock data:</p> <pre><code>aynse stock -s RELIANCE -f 2024-01-01 -t 2024-01-31 -o RELIANCE-Jan.csv\n</code></pre>"},{"location":"cli/#download-historical-index-data","title":"Download Historical Index Data","text":"<pre><code>aynse index --help\n</code></pre> <p>Download historical index data:</p> <pre><code>aynse index -s \"NIFTY 50\" -f 2024-01-01 -t 2024-01-31 -o NIFTY-Jan.csv\n</code></pre>"},{"location":"cli/#download-futures-options-data","title":"Download Futures &amp; Options Data","text":"<pre><code>aynse derivatives --help\n</code></pre> <p>Download stock futures data:</p> <pre><code>aynse derivatives -s RELIANCE -f 2024-01-01 -t 2024-01-31 -e 2024-01-25 -i FUTSTK -o file_name.csv\n</code></pre> <p>Download index futures data:</p> <pre><code>aynse derivatives -s NIFTY -f 2024-01-01 -t 2024-01-31 -e 2024-01-25 -i FUTIDX -o file_name.csv\n</code></pre> <p>Download stock call options data:</p> <pre><code>aynse derivatives -s RELIANCE -f 2024-01-01 -t 2024-01-31 -e 2024-01-25 -i OPTSTK -p 2800 --ce -o file_name.csv\n</code></pre> <p>Download index put options data:</p> <pre><code>aynse derivatives -s NIFTY -f 2024-01-01 -t 2024-01-25 -e 2024-01-25 -i OPTIDX -p 21000 --pe -o file_name.csv\n</code></pre>"},{"location":"data_calls/","title":"Data Calls Reference","text":"<p>Brief, canonical reference for all public data calls. Return types are noted succinctly.</p>"},{"location":"data_calls/#archives-aynsensearchives","title":"Archives (aynse.nse.archives)","text":"<ul> <li>bhavcopy_raw(dt: date) -&gt; str</li> <li>Equity bhavcopy CSV text for the given date.</li> <li> <p>Format: CSV string (columns per NSE CM bhavcopy).</p> </li> <li> <p>bhavcopy_save(dt: date, dest: str, skip_if_present=True) -&gt; str</p> </li> <li>Saves equity bhavcopy CSV to dest.</li> <li> <p>Returns file path.</p> </li> <li> <p>full_bhavcopy_raw(dt: date) -&gt; str</p> </li> <li>Full bhavcopy CSV text (includes delivery info).</li> <li> <p>Format: CSV string.</p> </li> <li> <p>full_bhavcopy_save(dt: date, dest: str, skip_if_present=True) -&gt; str</p> </li> <li> <p>Saves full bhavcopy CSV to dest; returns file path.</p> </li> <li> <p>bhavcopy_fo_raw(dt: date) -&gt; str</p> </li> <li> <p>F&amp;O bhavcopy CSV text for the given date.</p> </li> <li> <p>bhavcopy_fo_save(dt: date, dest: str, skip_if_present=True) -&gt; str</p> </li> <li> <p>Saves F&amp;O bhavcopy CSV; returns file path.</p> </li> <li> <p>bhavcopy_index_raw(dt: date) -&gt; str</p> </li> <li> <p>Index bhavcopy CSV text for the date (Nifty Indices).</p> </li> <li> <p>bhavcopy_index_save(dt: date, dest: str, skip_if_present=True) -&gt; str</p> </li> <li> <p>Saves index bhavcopy CSV; returns file path.</p> </li> <li> <p>index_constituent_raw(index_type: str) -&gt; str</p> </li> <li> <p>CSV text of constituents for an index (e.g., \"nifty50\").</p> </li> <li> <p>index_constituent_save(index_type: str, dest: str, skip_if_present=True) -&gt; str</p> </li> <li> <p>Saves constituents CSV; returns file path.</p> </li> <li> <p>index_constituent_save_all(dest: str, skip_if_present=True) -&gt; list[str]</p> </li> <li> <p>Saves constituents for all known indices; returns file paths.</p> </li> <li> <p>bulk_deals_raw(from_date: date, to_date: date) -&gt; dict</p> </li> <li>JSON for NSE bulk deals in date range.</li> <li> <p>Structure: {\"data\": [ ... records ... ], ...}</p> </li> <li> <p>bulk_deals_save(from_date: date, to_date: date, dest: str) -&gt; str</p> </li> <li> <p>Saves bulk deals JSON to file; returns file path.</p> </li> <li> <p>expiry_dates(dt: date, instrument_type: str = \"\", symbol: str = \"\", contracts: int = 0, months_ahead: int = 6) -&gt; list[date]</p> </li> <li>Algorithmic calculation of expiry dates honoring NSE policy changes.</li> </ul>"},{"location":"data_calls/#history-aynsensehistory","title":"History (aynse.nse.history)","text":"<ul> <li>stock_raw(symbol: str, from_date: date, to_date: date, series: str = \"EQ\") -&gt; list[dict]</li> <li>JSON-like list of rows from NSE \"historical cm equity\" API.</li> <li> <p>Keys include: CH_TIMESTAMP, CH_SERIES, CH_OPENING_PRICE, CH_TRADE_HIGH_PRICE, CH_TRADE_LOW_PRICE, CH_PREVIOUS_CLS_PRICE, CH_LAST_TRADED_PRICE, CH_CLOSING_PRICE, VWAP, CH_52WEEK_HIGH_PRICE, CH_52WEEK_LOW_PRICE, CH_TOT_TRADED_QTY, CH_TOT_TRADED_VAL, CH_TOTAL_TRADES, CH_SYMBOL.</p> </li> <li> <p>stock_df(symbol: str, from_date: date, to_date: date, series: str = \"EQ\") -&gt; pandas.DataFrame</p> </li> <li> <p>Columns: DATE, SERIES, OPEN, HIGH, LOW, PREV. CLOSE, LTP, CLOSE, VWAP, 52W H, 52W L, VOLUME, VALUE, NO OF TRADES, SYMBOL.</p> </li> <li> <p>stock_csv(symbol: str, from_date: date, to_date: date, series: str = \"EQ\", output: str = \"\", show_progress: bool = True) -&gt; str</p> </li> <li> <p>Saves CSV with same columns as stock_df; returns file path.</p> </li> <li> <p>derivatives_raw(symbol: str, from_date: date, to_date: date, expiry_date: date, instrument_type: str, strike_price: float | None, option_type: str | None) -&gt; list[dict]</p> </li> <li>JSON-like list from NSE \"historical fo derivatives\" API.</li> <li> <p>Keys include (subset): FH_TIMESTAMP, FH_EXPIRY_DT, FH_OPTION_TYPE (if options), FH_STRIKE_PRICE (if options), FH_OPENING_PRICE, FH_TRADE_HIGH_PRICE, FH_TRADE_LOW_PRICE, FH_CLOSING_PRICE, FH_LAST_TRADED_PRICE, FH_SETTLE_PRICE, FH_TOT_TRADED_QTY, FH_MARKET_LOT, FH_TOT_TRADED_VAL, FH_OPEN_INT, FH_CHANGE_IN_OI, FH_SYMBOL.</p> </li> <li> <p>derivatives_df(...) -&gt; pandas.DataFrame</p> </li> <li>FUT fields: DATE, EXPIRY, OPEN, HIGH, LOW, CLOSE, LTP, SETTLE PRICE, TOTAL TRADED QUANTITY, MARKET LOT, PREMIUM VALUE, OPEN INTEREST, CHANGE IN OI, SYMBOL.</li> <li> <p>OPT fields: DATE, EXPIRY, OPTION TYPE, STRIKE PRICE, OPEN, HIGH, LOW, CLOSE, LTP, SETTLE PRICE, TOTAL TRADED QUANTITY, MARKET LOT, PREMIUM VALUE, OPEN INTEREST, CHANGE IN OI, SYMBOL.</p> </li> <li> <p>derivatives_csv(...) -&gt; str</p> </li> <li> <p>Saves derivatives data to CSV; returns file path.</p> </li> <li> <p>index_raw(symbol: str, from_date: date, to_date: date) -&gt; list[dict]</p> </li> <li>Nifty Indices historical data via POST JSON; list of dict rows.</li> <li> <p>Typical keys: INDEX_NAME, HistoricalDate, OPEN, HIGH, LOW, CLOSE.</p> </li> <li> <p>index_pe_raw(symbol: str, from_date: date, to_date: date) -&gt; list[dict]</p> </li> <li> <p>Nifty Indices PE/PB/dividend data; keys include: pe, pb, divYield, DATE, Index Name.</p> </li> <li> <p>index_df(symbol: str, from_date: date, to_date: date) -&gt; pandas.DataFrame</p> </li> <li> <p>Typed dataframe from index_raw.</p> </li> <li> <p>index_pe_df(symbol: str, from_date: date, to_date: date) -&gt; pandas.DataFrame</p> </li> <li>Typed dataframe from index_pe_raw.</li> </ul>"},{"location":"data_calls/#live-aynsenselivenselive","title":"Live (aynse.nse.live.NSELive)","text":"<p>All return Python dicts parsed from NSE JSON unless noted.</p> <ul> <li>stock_quote(symbol: str) -&gt; dict</li> <li>stock_quote_fno(symbol: str) -&gt; dict</li> <li>trade_info(symbol: str) -&gt; dict</li> <li>market_status() -&gt; dict</li> <li>chart_data(symbol: str, indices: bool = False) -&gt; dict</li> <li>tick_data(symbol: str, indices: bool = False) -&gt; dict  (alias of chart_data)</li> <li>market_turnover() -&gt; dict</li> <li>eq_derivative_turnover(type: str = \"allcontracts\") -&gt; dict</li> <li>all_indices() -&gt; dict</li> <li>live_index(symbol: str = \"NIFTY 50\") -&gt; dict</li> <li>index_option_chain(symbol: str = \"NIFTY\") -&gt; dict</li> <li>equities_option_chain(symbol: str) -&gt; dict</li> <li>currency_option_chain(symbol: str = \"USDINR\") -&gt; dict</li> <li>live_fno() -&gt; dict  (alias: live_index(\"SECURITIES IN F&amp;O\"))</li> <li>pre_open_market(key: str = \"NIFTY\") -&gt; dict</li> <li>holiday_list() -&gt; dict</li> <li>corporate_announcements(segment: str = 'equities', from_date: date | None = None, to_date: date | None = None, symbol: str | None = None) -&gt; dict</li> </ul> <p>Notes: - Live methods are lightly cached (time-based) to reduce load. - HTTP client handles retries, priming, and pooling automatically.</p>"},{"location":"data_calls/#rbi-aynserbihistorical","title":"RBI (aynse.rbi.historical)","text":"<ul> <li>policy_rate_archive(n: int = 10) -&gt; list[dict]</li> <li>Scraped policy rate entries as list of dicts.</li> <li>Columns normalized to lowercase with underscores.</li> </ul>"},{"location":"data_calls/#batching-aynsenserequest_batcher","title":"Batching (aynse.nse.request_batcher)","text":"<ul> <li>batch_stock_requests(symbols: list[str], from_date: str, to_date: str, series: str = \"EQ\", batcher: RequestBatcher | None = None) -&gt; list[BatchResult]</li> <li>batch_index_requests(symbols: list[str], from_date: str, to_date: str, batcher: RequestBatcher | None = None) -&gt; list[BatchResult]</li> <li>batch_derivatives_requests(requests_data: list[dict], batcher: RequestBatcher | None = None) -&gt; list[BatchResult]</li> <li>BatchResult: { success: bool, data: Any, error: str | None, duration: float, retries: int }</li> </ul>"},{"location":"data_calls/#streaming-aynsensestreaming_processor","title":"Streaming (aynse.nse.streaming_processor)","text":"<ul> <li>StreamingProcessor.process_csv_file(file_path: str, processor_func, skip_header=True) -&gt; Any</li> <li>StreamingProcessor.process_json_file(file_path: str, processor_func) -&gt; Any</li> <li>stream_filter_data, stream_transform_data, stream_aggregate_data, create_data_generator(...)</li> <li>Generators and helpers for memory-efficient processing.</li> </ul>"},{"location":"historical/","title":"Historical Data","text":""},{"location":"historical/#download-bhavcopies","title":"Download Bhavcopies","text":"<p>You can download bhavcopies for stocks, indices, and futures &amp; options using <code>aynse</code>. The example below shows how to download different bhavcopies for January 1, 2024, and save them to a directory in CSV format.</p> <pre><code>from datetime import date\nfrom aynse.nse import bhavcopy_save, full_bhavcopy_save, bhavcopy_fo_save, bhavcopy_index_save\n\nbhavcopy_save(date(2024, 1, 1), \"/path/to/directory\")\nfull_bhavcopy_save(date(2024, 1, 1), \"/path/to/directory\")\nbhavcopy_fo_save(date(2024, 1, 1), \"/path/to/directory\")\nbhavcopy_index_save(date(2024, 1, 1), \"/path/to/directory\")\n</code></pre> <p>Note: The difference between <code>bhavcopy_save</code> and <code>full_bhavcopy_save</code> is that the full bhavcopy also includes the percentage of volume that was for delivery.</p>"},{"location":"historical/#download-index-constituents","title":"Download Index Constituents","text":"<p>Download the constituent stocks of various NSE indices.</p> <pre><code>from aynse.nse import index_constituent_save, index_constituent_save_all, index_constituent_raw\n\n# Download constituents for a specific index\nindex_constituent_save(\"nifty50\", \"/path/to/directory\")\n\n# Download raw constituents data as string\nraw_data = index_constituent_raw(\"nifty50\")\nprint(raw_data)\n\n# Download constituents for all available indices\nindex_constituent_save_all(\"/path/to/directory\")\n</code></pre>"},{"location":"historical/#download-bulk-deals-data","title":"Download Bulk Deals Data","text":"<p>Download bulk deals data for specific date ranges using the new bulk deals API.</p> <pre><code>from datetime import date\nfrom aynse.nse import bulk_deals_raw, bulk_deals_save\n\n# Download bulk deals data as JSON for a date range\nbulk_data = bulk_deals_raw(from_date=date(2024, 7, 1), \n                          to_date=date(2024, 7, 31))\nprint(f\"Found {len(bulk_data['data'])} bulk deals\")\n\n# Save bulk deals data to a JSON file\nbulk_deals_save(from_date=date(2024, 7, 1), \n               to_date=date(2024, 7, 31), \n               dest=\"/path/to/directory\")\n</code></pre>"},{"location":"historical/#download-historical-stock-data","title":"Download Historical Stock Data","text":"<pre><code>from datetime import date\nfrom aynse.nse import stock_csv, stock_df\n\n# Download as pandas dataframe\ndf = stock_df(symbol=\"RELIANCE\", from_date=date(2024, 1, 1),\n              to_date=date(2024, 1, 31), series=\"EQ\")\nprint(df.head())\n\n# Download data and save to a CSV file\nstock_csv(symbol=\"RELIANCE\", from_date=date(2024, 1, 1),\n          to_date=date(2024, 1, 31), series=\"EQ\", output=\"/path/to/file.csv\")\n</code></pre>"},{"location":"historical/#tips","title":"Tips","text":"<ul> <li>Large ranges are chunked month-by-month for reliability</li> <li>Retries with backoff are applied under the hood</li> <li>For many symbols, use the request batcher</li> </ul>"},{"location":"historical/#download-historical-index-data","title":"Download Historical Index Data","text":"<pre><code>from aynse.nse import index_csv, index_df, index_pe_df\n\n# Download as pandas dataframe\ndf = index_df(symbol=\"NIFTY 50\", from_date=date(2024, 1, 1),\n              to_date=date(2024, 1, 31))\nprint(df.head())\n\n# Download as a CSV file\nindex_csv(symbol=\"NIFTY 50\", from_date=date(2024, 1, 1),\n          to_date=date(2024, 1, 31), output=\"/path/to/file.csv\")\n\n# Download index P/E ratio data\npe_df = index_pe_df(symbol=\"NIFTY 50\", from_date=date(2024, 1, 1),\n                   to_date=date(2024, 1, 31))\nprint(pe_df.head())\n</code></pre>"},{"location":"historical/#download-historical-derivatives-data","title":"Download Historical Derivatives Data","text":""},{"location":"historical/#get-expiry-dates","title":"Get Expiry Dates","text":"<p>For a given day, fetch expiry dates of all active contracts.</p> <pre><code>from datetime import date\nfrom aynse.nse import expiry_dates\n\nexpiries = expiry_dates(date(2024, 1, 1))\nprint(expiries)\n</code></pre> <p>You can filter it further based on the contract type (e.g., <code>OPTIDX</code>, <code>FUTSTK</code>).</p> <pre><code>from datetime import date\nfrom aynse.nse import expiry_dates\n\nexpiries = expiry_dates(date(2024, 1, 1), \"FUTSTK\")\nprint(expiries)\n</code></pre>"},{"location":"historical/#master-functions-for-derivatives-data","title":"Master Functions for Derivatives Data","text":"<p>Use <code>derivatives_df</code> to download historical data for a given contract into a pandas DataFrame.</p> <pre><code>def derivatives_df(symbol, from_date, to_date, expiry_date, instrument_type, option_type, strike_price):\n    \"\"\"\n    Downloads historical data for a given contract into a pandas dataframe.\n\n    Args:\n        symbol (str): Stock symbol (e.g., \"SBIN\" or \"NIFTY\").\n        from_date (datetime.date): Start date.\n        to_date (datetime.date): End date.\n        expiry_date (datetime.date): Expiry date.\n        instrument_type (str): \"FUTSTK\", \"FUTIDX\", \"OPTSTK\", or \"OPTIDX\".\n        option_type (str): \"CE\" for call or \"PE\" for put (required for options).\n        strike_price (float): Strike price (required for options).\n    \"\"\"\n</code></pre> <p>To download as a CSV file, use <code>derivatives_csv</code> and provide an <code>output</code> path.</p>"},{"location":"historical/#stock-futures","title":"Stock Futures","text":"<pre><code>from aynse.nse import derivatives_df\n\ndf = derivatives_df(symbol=\"RELIANCE\", from_date=date(2024, 1, 1), to_date=date(2024, 1, 31),\n                    expiry_date=date(2024, 1, 25), instrument_type=\"FUTSTK\")\nprint(df.head())\n</code></pre>"},{"location":"historical/#stock-options","title":"Stock Options","text":"<pre><code>from aynse.nse import derivatives_df\n\ndf = derivatives_df(symbol=\"RELIANCE\", from_date=date(2024, 1, 1), to_date=date(2024, 1, 31),\n                    expiry_date=date(2024, 1, 25), instrument_type=\"OPTSTK\", \n                    option_type=\"CE\", strike_price=2800)\nprint(df.head())\n</code></pre>"},{"location":"historical/#index-futures","title":"Index Futures","text":"<pre><code>from aynse.nse import derivatives_df\n\ndf = derivatives_df(symbol=\"NIFTY\", from_date=date(2024, 1, 1), to_date=date(2024, 1, 31),\n                    expiry_date=date(2024, 1, 25), instrument_type=\"FUTIDX\")\nprint(df.head())\n</code></pre>"},{"location":"historical/#index-options","title":"Index Options","text":"<pre><code>from aynse.nse import derivatives_df\n\ndf = derivatives_df(symbol=\"NIFTY\", from_date=date(2024, 1, 1), to_date=date(2024, 1, 31),\n                    expiry_date=date(2024, 1, 25), instrument_type=\"OPTIDX\", \n                    option_type=\"CE\", strike_price=21000)\nprint(df.head())\n</code></pre>"},{"location":"historical/#bulk-derivatives-operations","title":"Bulk Derivatives Operations","text":"<p>For advanced users who need to fetch data for multiple derivatives contracts concurrently, <code>aynse</code> provides bulk fetching capabilities through the <code>NSEHistory</code> class.</p>"},{"location":"historical/#bulk-historical-derivatives-data","title":"Bulk Historical Derivatives Data","text":"<pre><code>from datetime import date\nfrom aynse.nse.history import NSEHistory\n\n# Create NSEHistory instance\nnse_history = NSEHistory()\n\n# Define multiple derivatives requests\nrequests_list = [\n    {\n        'symbol': 'RELIANCE',\n        'from_date': date(2024, 1, 1),\n        'to_date': date(2024, 1, 31),\n        'expiry_date': date(2024, 1, 25),\n        'instrument_type': 'FUTSTK'\n    },\n    {\n        'symbol': 'TCS',\n        'from_date': date(2024, 1, 1), \n        'to_date': date(2024, 1, 31),\n        'expiry_date': date(2024, 1, 25),\n        'instrument_type': 'FUTSTK'\n    },\n    {\n        'symbol': 'NIFTY',\n        'from_date': date(2024, 1, 1),\n        'to_date': date(2024, 1, 31), \n        'expiry_date': date(2024, 1, 25),\n        'instrument_type': 'FUTIDX'\n    }\n]\n\n# Fetch all contracts concurrently\nbulk_results = nse_history.bulk_derivatives_raw(requests_list, max_workers=3)\n\n# Process results\nfor result in bulk_results:\n    if 'error' in result:\n        print(f\"Error for {result['request']['symbol']}: {result['error']}\")\n    else:\n        print(f\"Downloaded {len(result['data'])} records for {result['request']['symbol']}\")\n</code></pre>"},{"location":"historical/#historical-options-analysis-around-earnings","title":"Historical Options Analysis Around Earnings","text":"<pre><code>from datetime import date\nfrom aynse.nse.history import NSEHistory\n\n# Create NSEHistory instance\nnse_history = NSEHistory()\n\n# Analyze options around earnings announcement\nearnings_analysis = nse_history.get_earnings_options_historical(\n    symbol='RELIANCE',\n    earnings_date=date(2024, 1, 19),\n    expiry_date=date(2024, 1, 25),\n    strike_prices=[2800, 2850, 2900, 2950, 3000],  # List of strike prices\n    days_around=7  # Days before/after earnings\n)\n\nprint(f\"Analyzed {len(earnings_analysis)} strike prices\")\nfor strike, data in earnings_analysis.items():\n    print(f\"Strike {strike}: {len(data['CE'])} CE records, {len(data['PE'])} PE records\")\n</code></pre>"},{"location":"live/","title":"Live Data","text":"<p>This documentation is currently under construction.</p>"},{"location":"live/#quick-start","title":"Quick Start","text":"<pre><code>from aynse.nse import NSELive\n\nlive = NSELive()\nquote = live.market_status()\nprint(quote)\n</code></pre> <p>Notes: - Live endpoints are cached briefly to reduce load (<code>live_cache</code>) - Client handles retries and session priming automatically</p>"}]}